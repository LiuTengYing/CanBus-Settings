{"version":3,"file":"admin.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,a,aCAxD,SAASC,EAAgBC,EAAGC,GAC1B,OAAOF,EAAkBZ,OAAOe,eAAiBf,OAAOe,eAAeC,OAAS,SAAUH,EAAGC,GAC3F,OAAOD,EAAEI,UAAYH,EAAGD,CAC1B,EAAGD,EAAgBC,EAAGC,EACxB,CCHA,SAASI,EAAeL,EAAGd,GACzBc,EAAEP,UAAYN,OAAOmB,OAAOpB,EAAEO,WAAYO,EAAEP,UAAUc,YAAcP,EAAGE,EAAeF,EAAGd,EAC3F,CCHA,MAAM,EAA+BU,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCInCU,EAAc,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAAG,EAAAC,GAAA,IAAAG,EAAAJ,EAAAf,UA4ChC,OA5CgCmB,EACjCC,OAAA,SAAOC,GACLL,EAAAhB,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKC,MAAQD,KAAKE,MAAMD,MACxBD,KAAKG,QAAUH,KAAKC,MAAMG,WAAWC,MAAQ,EAC/C,EAACR,EAEDS,UAAA,WACE,MAAO,6BACT,EAACT,EAEDU,MAAA,WACE,MAAO,YACT,EAACV,EAEDW,QAAA,WAAU,IAAAC,EAAA,KACR,OACEC,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,QACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,cACPA,EAAA,SACEJ,UAAU,cACVK,KAAK,OACLC,MAAOZ,KAAKG,QACZU,QAAS,SAAA3B,GAAC,OAAIuB,EAAKN,QAAUjB,EAAE4B,OAAOF,KAAK,KAI/CF,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,yBACVK,KAAK,SACLK,QAAS,WACPP,EAAKP,MAAMe,SAASR,EAAKN,SACzBM,EAAKS,MACP,GACD,kBAOX,EAACzB,CAAA,CA5CgC,CAAS0B,KCAvBC,EAAgB,SAAA1B,GAAA,SAAA0B,IAAA,OAAA1B,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAA8B,EAAA1B,GAAA,IAAAG,EAAAuB,EAAA1C,UAuClC,OAvCkCmB,EACnCC,OAAA,SAAOC,GACLL,EAAAhB,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKC,MAAQD,KAAKE,MAAMD,KAC1B,EAACJ,EAEDS,UAAA,WACE,MAAO,+BACT,EAACT,EAEDU,MAAA,WACE,MAAO,kBACT,EAACV,EAEDW,QAAA,WAAU,IAAAC,EAAA,KACR,OACEC,EAAA,OAAKJ,UAAU,cACbI,EAAA,SAAG,8CAA4CV,KAAKC,MAAMG,WAAWC,KAAK,8EAE1EK,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,wCACVU,QAAS,WACPP,EAAKP,MAAMmB,YACXZ,EAAKS,MACP,GACD,UAGA,IACDR,EAACK,IAAM,CACLT,UAAU,SACVU,QAAS,WAAF,OAAQP,EAAKS,MAAM,GAC3B,WAMT,EAACE,CAAA,CAvCkC,CAASD,KCEzBG,EAAS,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA5B,MAAA,KAAAC,YAAA,KAAAN,EAAAgC,EAAAC,GAAA,IAAA1B,EAAAyB,EAAA5C,UAiO3B,OAjO2BmB,EAC5BC,OAAA,SAAOC,GACLwB,EAAA7C,UAAMoB,OAAMlB,KAAC,KAAAmB,GAEbC,KAAKwB,QAAUxB,KAAKE,MAAMsB,QAC1BxB,KAAKyB,OAAS,GACdzB,KAAK0B,SAAU,EACf1B,KAAK2B,SAAW,GAEhB3B,KAAK4B,YACP,EAAC/B,EAED+B,WAAA,WAAa,IAAAnB,EAAA,KACXT,KAAK0B,SAAU,EAEfG,IAAAA,QAAY,CACVC,OAAQ,MACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,iBACrCC,OAAQ,CACNC,OAAQ,CAAEC,SAAUnC,KAAKwB,YAE1BY,MAAK,SAAAC,GACN5B,EAAKgB,OAASY,EAAOC,KACrB7B,EAAKiB,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACP/B,EAAKiB,SAAU,EACfhB,EAAE6B,SACFE,MAAM,yBAA2BD,EACnC,GACF,EAAC3C,EAED6C,KAAA,WAAO,IAAAC,EAAA,KACL,OACEjC,EAAA,OAAKJ,UAAU,aACbI,EAAA,UAAI,cAEJA,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,iBACPA,EAAA,SACEC,KAAK,OACLL,UAAU,cACVM,MAAOZ,KAAK2B,SACZd,QAAS,SAAA3B,GAAC,OAAIyD,EAAKhB,SAAWzC,EAAE4B,OAAOF,KAAK,EAC5CgC,YAAY,sBAIf7B,IAAAA,UAAiB,CAChBT,UAAW,yBACXuC,SAAU7C,KAAK0B,QACfV,QAAS,WAAF,OAAQ2B,EAAKG,WAAW,GAC9B,cAGJ9C,KAAK0B,QACJhB,EAACqC,IAAgB,MAEjBrC,EAAA,SAAOJ,UAAU,eACfI,EAAA,aACEA,EAAA,UACEA,EAAA,UAAKmB,IAAAA,WAAemB,MAAM,kDAC1BtC,EAAA,MAAIJ,UAAU,WAAWuB,IAAAA,WAAemB,MAAM,iDAGlDtC,EAAA,aACGV,KAAKyB,OAAOwB,KAAI,SAAAC,GAAK,OACpBxC,EAAA,MAAIxC,IAAKgF,EAAMC,IACbzC,EAAA,UAAKwC,EAAM9C,WAAWC,MACtBK,EAAA,MAAIJ,UAAU,WACXS,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,cACNpC,QAAS,WAAF,OAAQ2B,EAAKU,UAAUH,EAAM,EACpC3C,MAAOsB,IAAAA,WAAemB,MAAM,mDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,eACNpC,QAAS,WAAF,OAAQ2B,EAAKW,YAAYJ,EAAM,EACtC3C,MAAOsB,IAAAA,WAAemB,MAAM,qDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,qBACNpC,QAAS,WAAF,OAAQ2B,EAAKzC,MAAMqD,SAASL,EAAM,EACzC3C,MAAOsB,IAAAA,WAAemB,MAAM,0DAG7B,IAGiB,IAAvBhD,KAAKyB,OAAO+B,QACX9C,EAAA,UACEA,EAAA,MAAI+C,QAAQ,IAAInD,UAAU,eACvBuB,IAAAA,WAAemB,MAAM,oDASxC,EAACnD,EAEDiD,UAAA,WAAY,IAAAY,EAAA,KACV,GAAK1D,KAAK2B,SAASgC,OAAnB,CAKA,IAAMC,EAAY5D,KAAK2B,SAASgC,OAChC3D,KAAK0B,SAAU,EAGf,IAAMK,EAAMF,IAAAA,MAAUG,UAAU,UAAY,uBAC1C6B,mBAAmBD,GAAa,aAAeC,mBAAmB7D,KAAKwB,SAEzEsC,QAAQC,IAAI,gBAAiBH,EAAW,gBAAiB5D,KAAKwB,SAE9DK,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKA,IACJK,MAAK,SAAAC,GACNqB,EAAKjC,OAAOuC,KAAK3B,EAAOC,MACxBoB,EAAK/B,SAAW,GAChB+B,EAAKhC,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACPsB,QAAQtB,MAAM,sBAAuBA,GAGrCX,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,mBACpCI,MAAK,SAAAC,GACNqB,EAAKjC,OAAOuC,KAAK3B,EAAOC,MACxBoB,EAAK/B,SAAW,GAChB+B,EAAKhC,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAA0B,GACPH,QAAQtB,MAAM,yBAA0ByB,GACxCP,EAAKhC,SAAU,EACfhB,EAAE6B,SACFE,MAAM,wBAA0BD,EAAM0B,UAAY1B,EAAM0B,SAASC,OAAS3B,EAAM0B,SAASC,OAAO,GAAGC,OAAS5B,GAC9G,GACF,GArCA,MAFEC,MAAM,6BAwCV,EAAC5C,EAEDwD,UAAA,SAAUH,GAAO,IAAAmB,EAAA,KACfxC,IAAAA,MAAUyC,KAAKC,EAAgB,CAC7BrB,MAAOA,EACPjC,SAAU,SAACd,GACT,GAAKA,GAAWA,IAAY+C,EAAM9C,WAAWC,KAA7C,CAEAgE,EAAK3C,SAAU,EAEf,IAAM8C,EAAc,CAClBlC,KAAM,CACJ3B,KAAM,gBACNwC,GAAID,EAAMC,GACV/C,WAAY,CACVC,KAAMF,EAAQwD,UAKpB9B,IAAAA,QAAY,CACVC,OAAQ,QACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,kBAAoBkB,EAAMC,GAC/DsB,KAAMD,IACLpC,MAAK,SAAAC,GACN,IAAMqC,EAAQL,EAAK5C,OAAOkD,WAAU,SAAAjE,GAAC,OAAIA,EAAEyC,KAAOD,EAAMC,EAAE,KAC3C,IAAXuB,IACFL,EAAK5C,OAAOiD,GAASrC,EAAOC,MAE9B+B,EAAK3C,SAAU,EACfhB,EAAE6B,SAGF8B,EAAKzC,YAAW,GAEhBC,IAAAA,OAAWyC,KAAK,CAAC3D,KAAM,WAAY,kCAAkCR,EAAQwD,OAC/E,IAAE,OAAO,SAAAnB,GAAS,IAAAoC,EAChBd,QAAQtB,MAAM,wBAAyBA,GACvCsB,QAAQtB,MAAM,YAAaA,EAAM0B,UACjCG,EAAK3C,SAAU,EACfhB,EAAE6B,SACFE,MAAM,2BAA0C,OAAdmC,EAAApC,EAAM0B,WAAgB,OAARU,EAAdA,EAAgBT,SAAW,OAALS,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BR,SAAU5B,GAC3E,GApCyD,CAqC3D,GAEJ,EAAC3C,EAEDyD,YAAA,SAAYJ,GAAO,IAAA2B,EAAA,KACjBhD,IAAAA,MAAUyC,KAAKQ,EAAkB,CAC/B5B,MAAOA,EACP7B,UAAW,WACTwD,EAAKnD,SAAU,EAEfoC,QAAQC,IAAI,0BAA2Bb,EAAMC,IAC7CW,QAAQC,IAAI,eAAgBlC,IAAAA,MAAUG,UAAU,UAAY,kBAAoBkB,EAAMC,IACtFW,QAAQC,IAAI,0BAEZlC,IAAAA,QAAY,CACVC,OAAQ,SACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,kBAAoBkB,EAAMC,KAC9Df,MAAK,WACN0B,QAAQC,IAAI,8BACZc,EAAKpD,OAASoD,EAAKpD,OAAOS,QAAO,SAAAxB,GAAC,OAAIA,EAAEyC,KAAOD,EAAMC,EAAE,IACvD0B,EAAKnD,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAuC,EAChBjB,QAAQtB,MAAM,wBAAyBA,GACvCsB,QAAQtB,MAAM,YAAaA,EAAM0B,UACjCW,EAAKnD,SAAU,EACfhB,EAAE6B,SACFE,MAAM,2BAA0C,OAAdsC,EAAAvC,EAAM0B,WAAgB,OAARa,EAAdA,EAAgBZ,SAAW,OAALY,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BX,SAAU5B,GAC3E,GACF,GAEJ,EAAClB,CAAA,CAjO2B,CAAS0D,KAqOjCT,EAAc,SAAA7E,GAAA,SAAA6E,IAAA,OAAA7E,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAAiF,EAAA7E,GAAA,IAAAuF,EAAAV,EAAA7F,UA4CjB,OA5CiBuG,EAClBnF,OAAA,SAAOC,GACLL,EAAAhB,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKkD,MAAQlD,KAAKE,MAAMgD,MACxBlD,KAAKG,QAAUH,KAAKkD,MAAM9C,WAAWC,MAAQ,EAC/C,EAAC4E,EAED3E,UAAA,WACE,MAAO,6BACT,EAAC2E,EAED1E,MAAA,WACE,MAAO,YACT,EAAC0E,EAEDzE,QAAA,WAAU,IAAA0E,EAAA,KACR,OACExE,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,QACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,cACPA,EAAA,SACEJ,UAAU,cACVK,KAAK,OACLC,MAAOZ,KAAKG,QACZU,QAAS,SAAA3B,GAAC,OAAIgG,EAAK/E,QAAUjB,EAAE4B,OAAOF,KAAK,KAI/CF,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,yBACVK,KAAK,SACLK,QAAS,WACPkE,EAAKhF,MAAMe,SAASiE,EAAK/E,SACzB+E,EAAKhE,MACP,GACD,kBAOX,EAACqD,CAAA,CA5CiB,CAASpD,KAgDvB2D,EAAgB,SAAAK,GAAA,SAAAL,IAAA,OAAAK,EAAAxF,MAAA,KAAAC,YAAA,KAAAN,EAAAwF,EAAAK,GAAA,IAAAC,EAAAN,EAAApG,UAuCnB,OAvCmB0G,EACpBtF,OAAA,SAAOC,GACLoF,EAAAzG,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKkD,MAAQlD,KAAKE,MAAMgD,KAC1B,EAACkC,EAED9E,UAAA,WACE,MAAO,+BACT,EAAC8E,EAED7E,MAAA,WACE,MAAO,kBACT,EAAC6E,EAED5E,QAAA,WAAU,IAAA6E,EAAA,KACR,OACE3E,EAAA,OAAKJ,UAAU,cACbI,EAAA,SAAG,8CAA4CV,KAAKkD,MAAM9C,WAAWC,KAAK,qEAE1EK,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,wCACVU,QAAS,WACPqE,EAAKnF,MAAMmB,YACXgE,EAAKnE,MACP,GACD,UAGA,IACDR,EAACK,IAAM,CACLT,UAAU,SACVU,QAAS,WAAF,OAAQqE,EAAKnE,MAAM,GAC3B,WAMT,EAAC4D,CAAA,CAvCmB,CAAS3D,KC3RMmE,OCKc,IAE9BC,EAAQ,SAAAhE,GAAA,SAAAgE,IAAA,OAAAhE,EAAA5B,MAAA,KAAAC,YAAA,KAAAN,EAAAiG,EAAAhE,GAAA,IAAA1B,EAAA0F,EAAA7G,UAyQ1B,OAzQ0BmB,EAC3BC,OAAA,SAAOC,GACLwB,EAAA7C,UAAMoB,OAAMlB,KAAC,KAAAmB,GAEbC,KAAKwF,QAAUxF,KAAKE,MAAMsF,QAC1BxF,KAAKyF,MAAQ,GACbzF,KAAK0B,SAAU,EACf1B,KAAK0F,aAAe,GAGpB1F,KAAK2F,cAAgB,KACrB3F,KAAK4F,cAAgB,GAErB5F,KAAK6F,WACP,EAEAhG,EACAiG,SAAA,SAAS/F,GACHC,KAAKwF,UAAYxF,KAAKE,MAAMsF,UAC9BxF,KAAKwF,QAAUxF,KAAKE,MAAMsF,QAC1BxF,KAAKyF,MAAQ,GACbzF,KAAK0B,SAAU,EACf1B,KAAK6F,YAET,EAAChG,EAEDgG,UAAA,SAAUE,GAAsB,IAAAtF,EAAA,KAC9B,QADoB,IAAZsF,IAAAA,GAAe,IAClB/F,KAAKwF,QAIR,OAHAxF,KAAKyF,MAAQ,GACbzF,KAAK0B,SAAU,OACfhB,EAAE6B,SAIJvC,KAAK0B,SAAU,EAGf,IAAMK,EAAMF,IAAAA,MAAUG,UAAU,UAAY,gBACtCC,EAAS,CACb,mBAAoBjC,KAAKwF,SAIvBO,IACF9D,EAAO+D,UAAW,IAAIC,MAAOC,WAG/BrE,IAAAA,QAAY,CACVC,OAAQ,MACRC,IAAKA,EACLE,OAAQA,EAERkE,QAASJ,EAAe,CACtB,gBAAiB,sCACjB,OAAU,WACV,QAAW,KACT,CAAC,IACJ3D,MAAK,SAAAC,GACN5B,EAAKgF,MAAQpD,EAAOC,MAAQ,GAC5B7B,EAAKiB,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACP/B,EAAKgF,MAAQ,GACbhF,EAAKiB,SAAU,EACfhB,EAAE6B,QACJ,GACF,EAAC1C,EAED6C,KAAA,WAAO,IAAAC,EAAA,KACL,OAAK3C,KAAKwF,QAOR9E,EAAA,OAAKJ,UAAU,YACbI,EAAA,UAAI,eAEJA,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,sBACPA,EAAA,SACEC,KAAK,OACLL,UAAU,cACVM,MAAOZ,KAAK0F,aACZ7E,QAAS,SAAA3B,GAAC,OAAIyD,EAAK+C,aAAexG,EAAE4B,OAAOF,KAAK,EAChDgC,YAAY,oBAIhBlC,EAACK,IAAM,CACLT,UAAU,yBACVuC,SAAU7C,KAAK0B,QACfV,QAAS,WAAF,OAAQ2B,EAAKyD,UAAU,GAC/B,mBAKFpG,KAAK0B,QACJhB,EAACqC,IAAgB,MAEjBrC,EAAA,SAAOJ,UAAU,eACfI,EAAA,aACEA,EAAA,UACEA,EAAA,UAAKmB,IAAAA,WAAemB,MAAM,iDAC1BtC,EAAA,MAAIJ,UAAU,WAAWuB,IAAAA,WAAemB,MAAM,iDAGlDtC,EAAA,aACGV,KAAKyF,MAAMxC,KAAI,SAAAoD,GAAI,OAClB3F,EAAA,MAAIxC,IAAKmI,EAAKlD,IACZzC,EAAA,UAAK2F,EAAKjG,WAAWkG,YACrB5F,EAAA,MAAIJ,UAAU,WACXS,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,cACNpC,QAAS,WAAF,OAAQ2B,EAAK4D,SAASF,EAAK,EAClC9F,MAAOsB,IAAAA,WAAemB,MAAM,mDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,eACNpC,QAAS,WAAF,OAAQ2B,EAAK6D,WAAWH,EAAK,EACpC9F,MAAOsB,IAAAA,WAAemB,MAAM,qDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,qBACNpC,QAAS,WAAF,OAAQ2B,EAAKzC,MAAMqD,SAAS8C,EAAK,EACxC9F,MAAOsB,IAAAA,WAAemB,MAAM,2DAG7B,IAGgB,IAAtBhD,KAAKyF,MAAMjC,QACV9C,EAAA,UACEA,EAAA,MAAI+C,QAAQ,IAAInD,UAAU,eACvBuB,IAAAA,WAAemB,MAAM,mDAxE7BtC,EAAA,OAAKJ,UAAU,YACpBI,EAAA,SAAG,gCAgFT,EAACb,EAEDuG,SAAA,WAAW,IAAA1C,EAAA,KACT,GAAK1D,KAAK0F,cAAiB1F,KAAK0F,aAAa/B,OAA7C,CAEA3D,KAAK0B,SAAU,EAEf,IAAM8C,EAAc,CAClBlC,KAAM,CACJ3B,KAAM,eACNP,WAAY,CACVkG,WAAYtG,KAAK0F,aAAa/B,QAEhC8C,cAAe,CACbvD,MAAO,CACLZ,KAAM,CACJ3B,KAAM,gBACNwC,GAAInD,KAAKwF,aAOnB3D,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,gBACrCyC,KAAMD,IACLpC,MAAK,SAAAC,GACNqB,EAAK+B,MAAMzB,KAAK3B,EAAOC,MACvBoB,EAAKgC,aAAe,GACpBhC,EAAKhC,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAoC,EAChBlB,EAAKhC,SAAU,EACfhB,EAAE6B,SACFE,MAAM,wBAAuC,OAAdmC,EAAApC,EAAM0B,WAAgB,OAARU,EAAdA,EAAgBT,SAAW,OAALS,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BR,SAAU5B,GACxE,GAlC2D,CAmC7D,EAAC3C,EAED2G,WAAA,SAAWH,GAAM,IAAAhC,EAAA,KACfxC,IAAAA,MAAUyC,KAAKoC,EAAiB,CAC9BL,KAAMA,EACNhF,UAAW,WACTgD,EAAK3C,SAAU,EAEfG,IAAAA,QAAY,CACVC,OAAQ,SACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,iBAAmBqE,EAAKlD,KAC5Df,MAAK,WACNiC,EAAKoB,MAAQpB,EAAKoB,MAAMvD,QAAO,SAAAyE,GAAC,OAAIA,EAAExD,KAAOkD,EAAKlD,EAAE,IACpDkB,EAAK3C,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACP6B,EAAK3C,SAAU,EACfhB,EAAE6B,SACFE,MAAM,wBAA0BD,EAClC,GACF,GAEJ,EAAC3C,EAED0G,SAAA,SAASF,GAAM,IAAAxB,EAAA,KACbhD,IAAAA,MAAUyC,KAAKsC,EAAe,CAC5BP,KAAMA,EACNpF,SAAU,SAACyE,GACT,GAAKA,GAAgBA,IAAiBW,EAAKjG,WAAWkG,WAAtD,CAEAzB,EAAKnD,SAAU,EAEf,IAAM8C,EAAc,CAClBlC,KAAM,CACJ3B,KAAM,eACNwC,GAAIkD,EAAKlD,GACT/C,WAAY,CACVkG,WAAYZ,EAAa/B,UAM/B,IAAK0C,EAAKlD,GAIR,OAHAV,MAAM,kCACNoC,EAAKnD,SAAU,OACfhB,EAAE6B,SAIJV,IAAAA,QAAY,CACVC,OAAQ,QACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,iBAAmBqE,EAAKlD,GAC7DsB,KAAMD,IACLpC,MAAK,SAAAC,GAEN,IAAMqC,EAAQG,EAAKY,MAAMd,WAAU,SAAAgC,GAAC,OAAIA,EAAExD,KAAOkD,EAAKlD,EAAE,KACzC,IAAXuB,IACFG,EAAKY,MAAMf,GAASrC,EAAOC,MAG7BuC,EAAKnD,SAAU,EACfhB,EAAE6B,SAGFsC,EAAKgB,WAAU,GAEfhE,IAAAA,OAAWyC,KAAK,CAAC3D,KAAM,WAAY,uCAAuC+E,EAAa/B,OACzF,IAAE,OAAO,SAAAnB,GAAS,IAAAuC,EAChBF,EAAKnD,SAAU,EACfhB,EAAE6B,SAEFE,MAAM,0BAAyC,OAAdsC,EAAAvC,EAAM0B,WAAgB,OAARa,EAAdA,EAAgBZ,SAAW,OAALY,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BX,SAAU5B,GAC1E,GA7CwE,CA8C1E,GAEJ,EAAC+C,CAAA,CAzQ0B,CAASP,KA6QhC4B,EAAa,SAAAlH,GAAA,SAAAkH,IAAA,OAAAlH,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAAsH,EAAAlH,GAAA,IAAAuF,EAAA2B,EAAAlI,UA6ChB,OA7CgBuG,EACjBnF,OAAA,SAAOC,GACLL,EAAAhB,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKqG,KAAOrG,KAAKE,MAAMmG,KACvBrG,KAAK0F,aAAe1F,KAAKqG,KAAKjG,WAAWkG,YAAc,EACzD,EAACrB,EAED3E,UAAA,WACE,MAAO,4BACT,EAAC2E,EAED1E,MAAA,WACE,MAAO,iBACT,EAAC0E,EAEDzE,QAAA,WAAU,IAAA0E,EAAA,KACR,OACExE,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,QACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,cACPA,EAAA,SACEJ,UAAU,cACVK,KAAK,OACLC,MAAOZ,KAAK0F,aACZ7E,QAAS,SAAA3B,GAAC,OAAIgG,EAAKQ,aAAexG,EAAE4B,OAAOF,KAAK,EAChDgC,YAAY,oBAIhBlC,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,yBACVK,KAAK,SACLK,QAAS,WACPkE,EAAKhF,MAAMe,SAASiE,EAAKQ,cACzBR,EAAKhE,MACP,GACD,kBAOX,EAAC0F,CAAA,CA7CgB,CAASzF,KAiDtBuF,EAAe,SAAAvB,GAAA,SAAAuB,IAAA,OAAAvB,EAAAxF,MAAA,KAAAC,YAAA,KAAAN,EAAAoH,EAAAvB,GAAA,IAAAC,EAAAsB,EAAAhI,UAuClB,OAvCkB0G,EACnBtF,OAAA,SAAOC,GACLoF,EAAAzG,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKqG,KAAOrG,KAAKE,MAAMmG,IACzB,EAACjB,EAED9E,UAAA,WACE,MAAO,8BACT,EAAC8E,EAED7E,MAAA,WACE,MAAO,kBACT,EAAC6E,EAED5E,QAAA,WAAU,IAAA6E,EAAA,KACR,OACE3E,EAAA,OAAKJ,UAAU,cACbI,EAAA,SAAG,mDAAiDV,KAAKqG,KAAKjG,WAAWkG,WAAW,8DAEpF5F,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,wCACVU,QAAS,WACPqE,EAAKnF,MAAMmB,YACXgE,EAAKnE,MACP,GACD,UAGA,IACDR,EAACK,IAAM,CACLT,UAAU,SACVU,QAAS,WAAF,OAAQqE,EAAKnE,MAAM,GAC3B,WAMT,EAACwF,CAAA,CAvCkB,CAASvF,KC/TT0F,EAAU,SAAAtF,GAAA,SAAAsF,IAAA,OAAAtF,EAAA5B,MAAA,KAAAC,YAAA,KAAAN,EAAAuH,EAAAtF,GAAA,IAAA1B,EAAAgH,EAAAnI,UAoO5B,OApO4BmB,EAC7BC,OAAA,SAAOC,GACLwB,EAAA7C,UAAMoB,OAAMlB,KAAC,KAAAmB,GAEbC,KAAK8G,OAAS9G,KAAKE,MAAM4G,OACzB9G,KAAK+G,QAAU,GACf/G,KAAK0B,SAAU,EACf1B,KAAKgH,cAAgB,GAErBhH,KAAKiH,aACP,EAACpH,EAEDoH,YAAA,SAAYlB,GAAsB,IAAAtF,EAAA,KAChC,QADsB,IAAZsF,IAAAA,GAAe,IACpB/F,KAAK8G,OAIR,OAHA9G,KAAK+G,QAAU,GACf/G,KAAK0B,SAAU,OACfhB,EAAE6B,SAIJvC,KAAK0B,SAAU,EAEfG,IAAAA,QAAY,CACVC,OAAQ,MACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,kBACrCC,OAAQ,CACN,kBAAmBjC,KAAK8G,UAEzB1E,MAAK,SAAAC,GACN5B,EAAKsG,QAAU1E,EAAOC,MAAQ,GAC9B7B,EAAKiB,SAAU,EACfhB,EAAE6B,SAEEwD,GACFtF,EAAKwG,aAAY,EAErB,IAAE,OAAO,SAAAzE,GACP/B,EAAKsG,QAAU,GACftG,EAAKiB,SAAU,EACfhB,EAAE6B,QACJ,GACF,EAAC1C,EAED6C,KAAA,WAAO,IAAAC,EAAA,KACL,OAAK3C,KAAK8G,OAORpG,EAAA,OAAKJ,UAAU,cACbI,EAAA,UAAI,sBAEJA,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,yBACPA,EAAA,SACEC,KAAK,OACLL,UAAU,cACVM,MAAOZ,KAAKgH,cACZnG,QAAS,SAAA3B,GAAC,OAAIyD,EAAKqE,cAAgB9H,EAAE4B,OAAOF,KAAK,EACjDgC,YAAY,oBAIhBlC,EAACK,IAAM,CACLT,UAAU,yBACVuC,SAAU7C,KAAK0B,QACfV,QAAS,WAAF,OAAQ2B,EAAKuE,YAAY,GACjC,sBAKFlH,KAAK0B,QACJhB,EAACqC,IAAgB,MAEjBrC,EAAA,SAAOJ,UAAU,eACfI,EAAA,aACEA,EAAA,UACEA,EAAA,UAAKmB,IAAAA,WAAemB,MAAM,oDAC1BtC,EAAA,MAAIJ,UAAU,WAAWuB,IAAAA,WAAemB,MAAM,iDAGlDtC,EAAA,aACGV,KAAK+G,QAAQ9D,KAAI,SAAAkE,GAAM,OACtBzG,EAAA,MAAIxC,IAAKiJ,EAAOhE,IACdzC,EAAA,UAAKyG,EAAO/G,WAAWC,MACvBK,EAAA,MAAIJ,UAAU,WACXS,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,cACNpC,QAAS,WAAF,OAAQ2B,EAAKyE,WAAWD,EAAO,EACtC5G,MAAOsB,IAAAA,WAAemB,MAAM,mDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,eACNpC,QAAS,WAAF,OAAQ2B,EAAK0E,aAAaF,EAAO,EACxC5G,MAAOsB,IAAAA,WAAemB,MAAM,qDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,qBACNpC,QAAS,WAAF,OAAQ2B,EAAKzC,MAAMqD,SAAS4D,EAAO,EAC1C5G,MAAOsB,IAAAA,WAAemB,MAAM,2DAG7B,IAGkB,IAAxBhD,KAAK+G,QAAQvD,QACZ9C,EAAA,UACEA,EAAA,MAAI+C,QAAQ,IAAInD,UAAU,eACvBuB,IAAAA,WAAemB,MAAM,uDAxE7BtC,EAAA,OAAKJ,UAAU,cACpBI,EAAA,SAAG,+BAgFT,EAACb,EAEDqH,WAAA,WAAa,IAAAxD,EAAA,KACX,GAAK1D,KAAKgH,eAAkBhH,KAAKgH,cAAcrD,OAA/C,CAEA3D,KAAK0B,SAAU,EAEf,IAAM8C,EAAc,CAClBlC,KAAM,CACJ3B,KAAM,iBACNP,WAAY,CACVC,KAAML,KAAKgH,cAAcrD,QAE3B8C,cAAe,CACbJ,KAAM,CACJ/D,KAAM,CACJ3B,KAAM,eACNwC,GAAInD,KAAK8G,YAOnBjF,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,kBACrCyC,KAAMD,IACLpC,MAAK,SAAAC,GACNqB,EAAKqD,QAAQ/C,KAAK3B,EAAOC,MACzBoB,EAAKsD,cAAgB,GACrBtD,EAAKhC,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAoC,EAChBlB,EAAKhC,SAAU,EACfhB,EAAE6B,SACFE,MAAM,iCAAgD,OAAdmC,EAAApC,EAAM0B,WAAgB,OAARU,EAAdA,EAAgBT,SAAW,OAALS,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BR,SAAU5B,GACjF,GAlC6D,CAmC/D,EAAC3C,EAEDuH,WAAA,SAAWD,GAAQ,IAAA9C,EAAA,KACjBxC,IAAAA,MAAUyC,KAAKgD,EAAiB,CAC9BH,OAAQA,EACRlG,SAAU,SAACd,GACT,GAAKA,GAAWA,IAAYgH,EAAO/G,WAAWC,KAA9C,CAEAgE,EAAK3C,SAAU,EAEf,IAAM8C,EAAc,CAClBlC,KAAM,CACJ3B,KAAM,iBACNwC,GAAIgE,EAAOhE,GACX/C,WAAY,CACVC,KAAMF,EAAQwD,UAKpB9B,IAAAA,QAAY,CACVC,OAAQ,QACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,mBAAqBmF,EAAOhE,GACjEsB,KAAMD,IACLpC,MAAK,SAAAC,GACN,IAAMqC,EAAQL,EAAK0C,QAAQpC,WAAU,SAAA4C,GAAC,OAAIA,EAAEpE,KAAOgE,EAAOhE,EAAE,KAC7C,IAAXuB,IACFL,EAAK0C,QAAQrC,GAASrC,EAAOC,MAE/B+B,EAAK3C,SAAU,EACfhB,EAAE6B,SAEF8B,EAAK4C,aAAY,GAEjBpF,IAAAA,OAAWyC,KAAK,CAAC3D,KAAM,WAAY,0CAA0CR,EAAQwD,OACvF,IAAE,OAAO,SAAAnB,GAAS,IAAAuC,EAChBV,EAAK3C,SAAU,EACfhB,EAAE6B,SACFE,MAAM,mCAAkD,OAAdsC,EAAAvC,EAAM0B,WAAgB,OAARa,EAAdA,EAAgBZ,SAAW,OAALY,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BX,SAAU5B,GACnF,GAjC0D,CAkC5D,GAEJ,EAAC3C,EAEDwH,aAAA,SAAaF,GAAQ,IAAAtC,EAAA,KACnBhD,IAAAA,MAAUyC,KAAKkD,EAAmB,CAChCL,OAAQA,EACR9F,UAAW,WACTwD,EAAKnD,SAAU,EAEfG,IAAAA,QAAY,CACVC,OAAQ,SACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,mBAAqBmF,EAAOhE,KAChEf,MAAK,WACNyC,EAAKkC,QAAUlC,EAAKkC,QAAQ7E,QAAO,SAAAqF,GAAC,OAAIA,EAAEpE,KAAOgE,EAAOhE,EAAE,IAC1D0B,EAAKnD,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAiF,EAChB5C,EAAKnD,SAAU,EACfhB,EAAE6B,SACFE,MAAM,mCAAkD,OAAdgF,EAAAjF,EAAM0B,WAAgB,OAARuD,EAAdA,EAAgBtD,SAAW,OAALsD,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BrD,SAAU5B,GACnF,GACF,GAEJ,EAACqE,CAAA,CApO4B,CAAS7B,KAwOlCsC,EAAe,SAAA5H,GAAA,SAAA4H,IAAA,OAAA5H,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAAgI,EAAA5H,GAAA,IAAAuF,EAAAqC,EAAA5I,UA4ClB,OA5CkBuG,EACnBnF,OAAA,SAAOC,GACLL,EAAAhB,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKmH,OAASnH,KAAKE,MAAMiH,OACzBnH,KAAKG,QAAUH,KAAKmH,OAAO/G,WAAWC,MAAQ,EAChD,EAAC4E,EAED3E,UAAA,WACE,MAAO,8BACT,EAAC2E,EAED1E,MAAA,WACE,MAAO,oBACT,EAAC0E,EAEDzE,QAAA,WAAU,IAAA0E,EAAA,KACR,OACExE,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,QACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,sBACPA,EAAA,SACEJ,UAAU,cACVK,KAAK,OACLC,MAAOZ,KAAKG,QACZU,QAAS,SAAA3B,GAAC,OAAIgG,EAAK/E,QAAUjB,EAAE4B,OAAOF,KAAK,KAI/CF,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,yBACVK,KAAK,SACLK,QAAS,WACPkE,EAAKhF,MAAMe,SAASiE,EAAK/E,SACzB+E,EAAKhE,MACP,GACD,kBAOX,EAACoG,CAAA,CA5CkB,CAASnG,KAgDxBqG,EAAiB,SAAArC,GAAA,SAAAqC,IAAA,OAAArC,EAAAxF,MAAA,KAAAC,YAAA,KAAAN,EAAAkI,EAAArC,GAAA,IAAAC,EAAAoC,EAAA9I,UAuCpB,OAvCoB0G,EACrBtF,OAAA,SAAOC,GACLoF,EAAAzG,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKmH,OAASnH,KAAKE,MAAMiH,MAC3B,EAAC/B,EAED9E,UAAA,WACE,MAAO,gCACT,EAAC8E,EAED7E,MAAA,WACE,MAAO,kBACT,EAAC6E,EAED5E,QAAA,WAAU,IAAA6E,EAAA,KACR,OACE3E,EAAA,OAAKJ,UAAU,cACbI,EAAA,SAAG,sDAAoDV,KAAKmH,OAAO/G,WAAWC,KAAK,kDAEnFK,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,wCACVU,QAAS,WACPqE,EAAKnF,MAAMmB,YACXgE,EAAKnE,MACP,GACD,UAGA,IACDR,EAACK,IAAM,CACLT,UAAU,SACVU,QAAS,WAAF,OAAQqE,EAAKnE,MAAM,GAC3B,WAMT,EAACsG,CAAA,CAvCoB,CAASrG,KCxRXuG,EAAQ,SAAAnG,GAAA,SAAAmG,IAAA,OAAAnG,EAAA5B,MAAA,KAAAC,YAAA,KAAAN,EAAAoI,EAAAnG,GAAA,IAAA1B,EAAA6H,EAAAhJ,UAiW1B,OAjW0BmB,EAC3BC,OAAA,SAAOC,GAAO,IAAAU,EAAA,KACZc,EAAA7C,UAAMoB,OAAMlB,KAAC,KAAAmB,GAEb,IAWE,GAVA+D,QAAQC,IAAI,oCAAqChE,EAAMG,OAEvDF,KAAK2H,SAAW5H,EAAMG,MAAQH,EAAMG,MAAMyH,SAAW,KACrD7D,QAAQC,IAAI,sBAAuB/D,KAAK2H,UAExC3H,KAAK4H,MAAQ,GACb5H,KAAK0B,SAAU,EACf1B,KAAK6H,QAAU,GACf7H,KAAK8H,mBAAqB,IAErB9H,KAAK2H,SAGR,OAFA7D,QAAQtB,MAAM,kCAAmCxC,KAAK2H,SAAU,4BAChE3H,KAAK0B,SAAU,GAIjBqG,YAAW,WACT,IACEtH,EAAKuH,WACP,CAAE,MAAO9I,GACP4E,QAAQtB,MAAM,8BAA+BtD,GAC7CuB,EAAKiB,SAAU,EACfhB,EAAE6B,QACJ,CACF,GAAG,IACL,CAAE,MAAOC,GACPsB,QAAQtB,MAAM,oCAAqCA,GACnDxC,KAAK0B,SAAU,CACjB,CACF,EAAC7B,EAEDmI,UAAA,WAAY,IAAArF,EAAA,KACV,IACE,IAAK3C,KAAK2H,SAKR,OAJA7D,QAAQtB,MAAM,oDACdxC,KAAK4H,MAAQ,GACb5H,KAAK0B,SAAU,OACfhB,EAAE6B,SAIJvC,KAAK0B,SAAU,EACfoC,QAAQC,IAAI,+BAAgC/D,KAAK2H,UAEjD9F,IAAAA,QAAY,CACVC,OAAQ,MACRC,IAAQF,IAAAA,MAAUG,UAAU,UAAS,gBACrCC,OAAQ,CACN,oBAAqBjC,KAAK2H,YAE3BvF,MAAK,SAAA8B,GACNJ,QAAQC,IAAI,gBAAiBG,GAEzBA,GAAYA,EAAS5B,KACvBK,EAAKiF,MAAQK,MAAMC,QAAQhE,EAAS5B,MAAQ4B,EAAS5B,KAAO,IAE5DwB,QAAQqE,KAAK,kCAAmCjE,GAChDvB,EAAKiF,MAAQ,IAGfjF,EAAKjB,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACPsB,QAAQtB,MAAM,uBAAwBA,GACtCsB,QAAQtB,MAAM,YAAaA,EAAM0B,UACjCvB,EAAKiF,MAAQ,GACbjF,EAAKjB,SAAU,EACfhB,EAAE6B,QACJ,GACF,CAAE,MAAOC,GACPsB,QAAQtB,MAAM,iCAAkCA,GAChDxC,KAAK4H,MAAQ,GACb5H,KAAK0B,SAAU,EACfhB,EAAE6B,QACJ,CACF,EAAC1C,EAED6C,KAAA,WAAO,IAAAgB,EAAA,KACL,IACE,IAAK1D,KAAK2H,SACR,OACEjH,EAAA,OAAKJ,UAAU,YACbI,EAAA,UAAI,aACJA,EAAA,OAAKJ,UAAU,gBACbI,EAAA,SAAG,qEAMX,IAAM0H,EAAkBpI,KAAK4H,OAASK,MAAMC,QAAQlI,KAAK4H,QAAU5H,KAAK4H,MAAMpE,OAAS,EAEvF,OACE9C,EAAA,OAAKJ,UAAU,YACbI,EAAA,UAAI,cAEF0H,IAAoBpI,KAAK0B,SACzBhB,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,YACPA,EAAA,SACEC,KAAK,OACLL,UAAU,cACVM,MAAOZ,KAAK6H,QACZhH,QAAS,SAAA3B,GAAC,OAAIwE,EAAKmE,QAAU3I,EAAE4B,OAAOF,KAAK,EAC3CgC,YAAY,oCAGdlC,EAAA,SAAO2H,MAAO,CAAEC,UAAW,SAAU,oBACrC5H,EAAA,YACEJ,UAAU,cACVM,MAAOZ,KAAK8H,oBAAsB,GAClCjH,QAAS,SAAA3B,GAAC,OAAIwE,EAAKoE,mBAAqB5I,EAAE4B,OAAOF,KAAK,EACtDgC,YAAY,4CACZ2F,KAAK,OAIT7H,EAACK,IAAM,CACLT,UAAU,yBACVuC,SAAU7C,KAAK0B,QACfV,QAAS,WAAF,OAAQ0C,EAAK8E,UAAU,GAC/B,aAMJxI,KAAK0B,QACJhB,EAACqC,IAAgB,MAEjBrC,EAAA,SAAOJ,UAAU,eACfI,EAAA,aACEA,EAAA,UACEA,EAAA,UAAKmB,IAAAA,WAAemB,MAAM,+CAC1BtC,EAAA,MAAIJ,UAAU,WAAWuB,IAAAA,WAAemB,MAAM,iDAGlDtC,EAAA,aACGV,KAAK4H,OAAS5H,KAAK4H,MAAM3E,KAAI,SAAAwF,GAC5B,OAAKA,GAASA,EAAKrI,WAMjBM,EAAA,MAAIxC,IAAKuK,EAAKtF,IACZzC,EAAA,UACG,CACCA,EAAA,OAAKJ,UAAU,YACbI,EAAA,KAAGgI,KAAMD,EAAKrI,WAAW2B,IAAKjB,OAAO,SAAS6H,IAAI,uBAC/CF,EAAKrI,WAAW2B,MAGrB0G,EAAKrI,WAAWwI,aACdlI,EAAA,OAAKJ,UAAU,kBAAkB+H,MAAO,CAAEC,UAAW,MAAOO,SAAU,QAASC,MAAO,SACnFL,EAAKrI,WAAWwI,eAKzBlI,EAAA,MAAIJ,UAAU,WACXS,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,cACNpC,QAAS,WAAF,OAAQ0C,EAAKqF,SAASN,EAAK,EAClClI,MAAOsB,IAAAA,WAAemB,MAAM,mDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,eACNpC,QAAS,WAAF,OAAQ0C,EAAKsF,WAAWP,EAAK,EACpClI,MAAOsB,IAAAA,WAAemB,MAAM,wDAhClCc,QAAQtB,MAAM,qBAAsBiG,GAC7B,KAoCX,MAEGzI,KAAK4H,OAA+B,IAAtB5H,KAAK4H,MAAMpE,SAC1B9C,EAAA,UACEA,EAAA,MAAI+C,QAAQ,IAAInD,UAAU,eACvBuB,IAAAA,WAAemB,MAAM,kDASxC,CAAE,MAAOR,GAEP,OADAsB,QAAQtB,MAAM,0BAA2BA,GAEvC9B,EAAA,OAAKJ,UAAU,YACbI,EAAA,UAAI,aACJA,EAAA,OAAKJ,UAAU,eACbI,EAAA,SAAG,kFACHA,EAAA,KAAGJ,UAAU,gBAAgBkC,EAAMyG,UAI3C,CACF,EAACpJ,EAED2I,SAAA,WAAW,IAAAnE,EAAA,KACT,GAAKrE,KAAK6H,SAAY7H,KAAK6H,QAAQlE,OAEnC,GAAI3D,KAAK4H,MAAMpE,OAAS,EACtBf,MAAM,kDADR,CAKAzC,KAAK0B,SAAU,EACfoC,QAAQC,IAAI,iCAAkC/D,KAAK2H,UAEnD,IAAMrF,EAAO,CACXA,KAAM,CACJ3B,KAAM,eACNP,WAAY,CACV2B,IAAK/B,KAAK6H,QAAQlE,OAClBiF,YAAa5I,KAAK8H,mBAAqB9H,KAAK8H,mBAAmBnE,OAAS,IAE1E8C,cAAe,CACbU,OAAQ,CACN7E,KAAM,CACJ3B,KAAM,iBACNwC,GAAInD,KAAK2H,cAOnB7D,QAAQC,IAAI,gBAAiBzB,GAE7BT,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAQF,IAAAA,MAAUG,UAAU,UAAS,gBACrCyC,KAAMnC,IACLF,MAAK,SAAA8B,GACNJ,QAAQC,IAAI,2BAA4BG,GACxCG,EAAKuD,MAAM5D,KAAKE,EAAS5B,MACzB+B,EAAKwD,QAAU,GACfxD,EAAKyD,mBAAqB,GAC1BzD,EAAK3C,SAAU,EAGX2C,EAAKnE,MAAMgJ,UACb7E,EAAKnE,MAAMgJ,SAAS,CAClBC,OAAQ,MACRxB,SAAUtD,EAAKsD,WAInBjH,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAoC,EAChBd,QAAQtB,MAAM,qBAAsBA,GACpCsB,QAAQtB,MAAM,gBAAiBF,GAC/BwB,QAAQtB,MAAM,YAAaA,EAAM0B,UACjCG,EAAK3C,SAAU,EACfhB,EAAE6B,SACFE,MAAM,wBAAuC,OAAdmC,EAAApC,EAAM0B,WAAgB,OAARU,EAAdA,EAAgBT,SAAW,OAALS,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BR,SAAU5B,GACxE,GApDA,CAqDF,EAAC3C,EAEDkJ,SAAA,SAASN,GAAM,IAAA5D,EAAA,KACR4D,GAASA,EAAKrI,WAKnByB,IAAAA,MAAUyC,KAAK8E,EAAe,CAC5BX,KAAMA,EACNxH,SAAU,SAACc,EAAK6G,GACd,GAAK7G,IAAOA,IAAQ0G,EAAKrI,WAAW2B,KAAO6G,IAAgBH,EAAKrI,WAAWwI,aAA3E,CAEA/D,EAAKnD,SAAU,EAEf,IAAMY,EAAO,CACXA,KAAM,CACJ3B,KAAM,eACNwC,GAAIsF,EAAKtF,GACT/C,WAAY,CACV2B,IAAKA,EAAI4B,OACTiF,YAAaA,EAAcA,EAAYjF,OAAS,MAKtD9B,IAAAA,QAAY,CACVC,OAAQ,QACRC,IAAQF,IAAAA,MAAUG,UAAU,UAAS,iBAAiByG,EAAKtF,GAC3DsB,KAAMnC,IACLF,MAAK,SAAA8B,GACN,IAAMQ,EAAQG,EAAK+C,MAAMjD,WAAU,SAAA0E,GAAC,OAAIA,EAAElG,KAAOsF,EAAKtF,EAAE,KACzC,IAAXuB,IACFG,EAAK+C,MAAMlD,GAASR,EAAS5B,MAE/BuC,EAAKnD,SAAU,EAGXmD,EAAK3E,MAAMgJ,UACbrE,EAAK3E,MAAMgJ,SAAS,CAClBC,OAAQ,OACRxB,SAAU9C,EAAK8C,WAInBjH,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAuC,EAChBF,EAAKnD,SAAU,EACfhB,EAAE6B,SACFE,MAAM,0BAAyC,OAAdsC,EAAAvC,EAAM0B,WAAgB,OAARa,EAAdA,EAAgBZ,SAAW,OAALY,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BX,SAAU5B,GAC1E,GAvC8F,CAwChG,IA/CAsB,QAAQtB,MAAM,0CAiDlB,EAAC3C,EAEDmJ,WAAA,SAAWP,GAAM,IAAAvD,EAAA,KACfrD,IAAAA,MAAUyC,KAAKgF,EAAoB,CACjCjI,UAAW,WACT6D,EAAKxD,SAAU,EAEfG,IAAAA,QAAY,CACVC,OAAQ,SACRC,IAAQF,IAAAA,MAAUG,UAAU,UAAS,iBAAiByG,EAAKtF,KAC1Df,MAAK,WACN8C,EAAK0C,MAAQ1C,EAAK0C,MAAM1F,QAAO,SAAAmH,GAAC,OAAIA,EAAElG,KAAOsF,EAAKtF,EAAE,IACpD+B,EAAKxD,SAAU,EAGXwD,EAAKhF,MAAMgJ,UACbhE,EAAKhF,MAAMgJ,SAAS,CAClBC,OAAQ,SACRxB,SAAUzC,EAAKyC,WAInBjH,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GAAS,IAAAiF,EAChBvC,EAAKxD,SAAU,EACfhB,EAAE6B,SACFE,MAAM,0BAAyC,OAAdgF,EAAAjF,EAAM0B,WAAgB,OAARuD,EAAdA,EAAgBtD,SAAW,OAALsD,EAAtBA,EAAyB,SAAE,EAA3BA,EAA6BrD,SAAU5B,GAC1E,GACF,GAEJ,EAACkF,CAAA,CAjW0B,CAAS1C,KAqWhCoE,EAAa,SAAA1J,GAAA,SAAA0J,IAAA,OAAA1J,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAA8J,EAAA1J,GAAA,IAAAuF,EAAAmE,EAAA1K,UAuDhB,OAvDgBuG,EACjBnF,OAAA,SAAOC,GACLL,EAAAhB,UAAMoB,OAAMlB,KAAC,KAAAmB,GACbC,KAAKyI,KAAOzI,KAAKE,MAAMuI,KACvBzI,KAAK+B,IAAM/B,KAAKyI,KAAKrI,WAAW2B,KAAO,GACvC/B,KAAK4I,YAAc5I,KAAKyI,KAAKrI,WAAWwI,aAAe,EACzD,EAAC3D,EAED3E,UAAA,WACE,MAAO,4BACT,EAAC2E,EAED1E,MAAA,WACE,MAAO,WACT,EAAC0E,EAEDzE,QAAA,WAAU,IAAA6E,EAAA,KACR,OACE3E,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,QACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,YACPA,EAAA,SACEJ,UAAU,cACVK,KAAK,OACLC,MAAOZ,KAAK+B,IACZlB,QAAS,SAAA3B,GAAC,OAAImG,EAAKtD,IAAM7C,EAAE4B,OAAOF,KAAK,KAI3CF,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAO,+BACPA,EAAA,YACEJ,UAAU,cACVM,MAAOZ,KAAK4I,YACZ/H,QAAS,SAAA3B,GAAC,OAAImG,EAAKuD,YAAc1J,EAAE4B,OAAOF,KAAK,EAC/C2H,KAAK,OAIT7H,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,yBACVK,KAAK,SACLK,QAAS,WACPqE,EAAKnF,MAAMe,SAASoE,EAAKtD,IAAKsD,EAAKuD,aACnCvD,EAAKnE,MACP,GACD,kBAOX,EAACkI,CAAA,CAvDgB,CAASjI,KA2DtBmI,EAAkB,SAAAnE,GAAA,SAAAmE,IAAA,OAAAnE,EAAAxF,MAAA,KAAAC,YAAA,KAAAN,EAAAgK,EAAAnE,GAAA,IAAAC,EAAAkE,EAAA5K,UAkCrB,OAlCqB0G,EACtB9E,UAAA,WACE,MAAO,iCACT,EAAC8E,EAED7E,MAAA,WACE,MAAO,kBACT,EAAC6E,EAED5E,QAAA,WAAU,IAAA+I,EAAA,KACR,OACE7I,EAAA,OAAKJ,UAAU,cACbI,EAAA,SAAG,8CAEHA,EAAA,OAAKJ,UAAU,cACbI,EAACK,IAAM,CACLT,UAAU,wCACVU,QAAS,WACPuI,EAAKrJ,MAAMmB,YACXkI,EAAKrI,MACP,GACD,UAGA,IACDR,EAACK,IAAM,CACLT,UAAU,SACVU,QAAS,WAAF,OAAQuI,EAAKrI,MAAM,GAC3B,WAMT,EAACoI,CAAA,CAlCqB,CAASnI,KC1ZZqI,EAAkB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA9J,MAAA,KAAAC,YAAA,KAAAN,EAAAkK,EAAAC,GAAA,IAAA5J,EAAA2J,EAAA9K,UA+jBpC,OA/jBoCmB,EACrC6J,gBAAA,WACE,OAAO7H,IAAAA,QAAY,CACjBC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,YACrCyC,KAAM,CACJnC,KAAM,CAAC,CACL3B,KAAM,WACNwC,GAAI,wCAITf,MAAK,SAAA8B,GAeJ,OAdIA,GAAYA,EAAS5B,MACvB4B,EAAS5B,KAAKqH,SAAQ,SAAAC,GACD,qCAAfA,EAAQzG,KACLtB,IAAAA,KAASgI,WACZhI,IAAAA,KAASgI,SAAW,CAAC,GAEvBhI,IAAAA,KAASgI,SAAS,oCAAsCD,EAAQxJ,WAAWQ,MAEvEiB,IAAAA,OAAaA,IAAAA,MAAUS,MAAQT,IAAAA,MAAUS,KAAKlC,aAChDyB,IAAAA,MAAUS,KAAKlC,WAAW,qBAAuBwJ,EAAQxJ,WAAWQ,OAG1E,IAEKsD,CACT,IAAE,OACK,SAAA1B,GACL,IACE,IAAMsH,EAAaC,aAAaC,QAAQ,8BACpCF,IACGjI,IAAAA,KAASgI,WAAUhI,IAAAA,KAASgI,SAAW,CAAC,GAC7ChI,IAAAA,KAASgI,SAAS,oCAAsCC,EAE5D,CAAE,MAAO5K,GAAI,CACb,MAAO,CAAEoD,KAAM,GACjB,GACF,EAACzC,EAEDC,OAAA,SAAOC,GAAO,IAAAU,EAAA,KACZgJ,EAAA/K,UAAMoB,OAAMlB,KAAC,KAAAmB,GAEbC,KAAK0B,SAAU,EACf1B,KAAKiK,QAAU,SACfjK,KAAKkK,UAAY,GACjBlK,KAAKmK,WAAa,GAElB,IACE,IAAMC,EAAoBL,aAAaC,QAAQ,8BAC3CI,IACFpK,KAAKmK,WAAaC,EAEtB,CAAE,MAAOlL,GAAI,CAEbc,KAAK0J,kBAAkBtH,MAAK,WACtBP,IAAAA,OAAaA,IAAAA,MAAUG,UAAU,qBACnCvB,EAAK0J,WAAatI,IAAAA,MAAUG,UAAU,qBAE/BH,IAAAA,MAAYA,IAAAA,KAASgI,UAAYhI,IAAAA,KAASgI,SAAS,sCAC1DpJ,EAAK0J,WAAatI,IAAAA,KAASgI,SAAS,oCAExC,IAEA7J,KAAKqK,YACP,EAACxK,EAEDwK,WAAA,WAAa,IAAA1H,EAAA,KACX3C,KAAK0B,SAAU,EACfG,IAAAA,QAAY,CACVC,OAAQ,MACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,mBACpCI,MAAK,SAAAC,GACNM,EAAK2H,OAASjI,EAAOC,MAAQ,GAC7BK,EAAKjB,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACPG,EAAK2H,OAAS,GACd3H,EAAKjB,SAAU,EACfhB,EAAE6B,QACJ,GACF,EAAC1C,EAEDW,QAAA,WAAU,IAAAkD,EAAA,KACR,OACEhD,EAAA,OAAKJ,UAAU,4CAA4C+H,MAAO,CAChEkC,SAAU,OACVC,OAAQ,IACRC,MAAO,SAEP/J,EAAA,OAAKJ,UAAU,YAAY+H,MAAO,CAChCkC,SAAU,OACVG,QAAS,SACTD,MAAO,OACPE,UAAW,eAEXjK,EAAA,OAAKJ,UAAU,aAAa+H,MAAO,CAAEoC,MAAO,SAC1C/J,EAAA,aAAO,kBACPA,EAAA,OAAKJ,UAAU,YAAW,8EAG1BI,EAAA,SACEyC,GAAG,0BACH7C,UAAU,cACVK,KAAK,OACLC,MAAOZ,KAAKmK,WACZtJ,QAAS,SAAC3B,GAAC,OAAKwE,EAAKyG,WAAajL,EAAE4B,OAAOF,KAAK,EAChDgC,YAAY,iHACZyF,MAAO,CACLoC,MAAO,OACPF,SAAU,OACVI,UAAW,gBAGfjK,EAAA,KAAGJ,UAAU,WAAW+H,MAAO,CAAEC,UAAW,QAC1C5H,EAAA,KAAGJ,UAAU,qBAAqB+H,MAAO,CAAEuC,YAAa,SAAa,4EAGvElK,EAAA,OAAKJ,UAAU,6BACZS,IAAAA,UAAiB,CAChBJ,KAAM,SACNL,UAAW,yBACXoB,QAAS1B,KAAK0B,QACdV,QAAShB,KAAK6K,aAAazL,KAAKY,OAC/B,kBAIPU,EAAA,OAAKJ,UAAU,mBAAmB+H,MAAO,CAAEoC,MAAO,SAChD/J,EAAA,OAAKJ,UAAU,eACbI,EAAA,aAAO,oBACPA,EAAA,KAAGJ,UAAU,YAAW,8DAExBI,EAAA,OAAKJ,UAAU,qBAAqB+H,MAAO,CAAEoC,MAAO,SAClD/J,EAAA,OAAKJ,UAAU,6BACbI,EAAA,KAAGJ,UAAU,uBAAyB,8BAExCI,EAAA,OAAKJ,UAAU,8BACbI,EAAA,SAAG,wDACHA,EAAA,UACEA,EAAA,UAAIA,EAAA,cAAQ,WAAgB,8BAC5BA,EAAA,UAAIA,EAAA,cAAQ,WAAgB,iCAA8BA,EAAA,KAAGJ,UAAU,uBAAyB,SAChGI,EAAA,UAAIA,EAAA,cAAQ,UAAe,kCAA+BA,EAAA,KAAGJ,UAAU,uBAAyB,SAChGI,EAAA,UAAIA,EAAA,cAAQ,mBAAwB,0CAAuCA,EAAA,KAAGJ,UAAU,uBAAyB,SACjHI,EAAA,UAAIA,EAAA,cAAQ,aAAkB,wCAAqCA,EAAA,KAAGJ,UAAU,uBAAyB,SACzGI,EAAA,UAAIA,EAAA,cAAQ,cAAmB,6CAEjCA,EAAA,SAAG,mGAINV,KAAK8K,iBAEL9K,KAAK0B,QACJhB,EAACqC,IAAgB,MAEjB/C,KAAK+K,kBAOnB,EAAClL,EAEDgL,aAAA,WAAe,IAAAxG,EAAA,KACb,IAAIrE,KAAK0B,QAAT,CAEA1B,KAAK0B,SAAU,EACf,IAAMyI,EAAanK,KAAKmK,WAExB,QAAmBa,IAAfb,EAGF,OAFAtI,IAAAA,OAAWyC,KAAK,CAAE3D,KAAM,SAAW,gBACnCX,KAAK0B,SAAU,GAIjB,IAAMuJ,EAAa,CACjB,mCAAoCd,GAGtCtI,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,YACrCyC,KAAMwG,IAEP7I,MAAK,SAAC8B,GACLG,EAAK3C,SAAU,EAEVG,IAAAA,KAASgI,WAAUhI,IAAAA,KAASgI,SAAW,CAAC,GAC7ChI,IAAAA,KAASgI,SAAS,oCAAsCM,EAEpDtI,IAAAA,OAAaA,IAAAA,MAAUS,MAAQT,IAAAA,MAAUS,KAAKlC,aAChDyB,IAAAA,MAAUS,KAAKlC,WAAW,qBAAuB+J,EAC7C,iEACFtI,IAAAA,MAAUS,KAAKlC,WAAW,oCAAsC+J,IAIpE9F,EAAK8F,WAAaA,EAElB,IACEJ,aAAamB,QAAQ,6BAA8Bf,EACrD,CAAE,MAAOjL,GAAI,CAEb2C,IAAAA,OAAWyC,KAAK,CAAE3D,KAAM,WAAa,+BACrCD,EAAE6B,QACJ,IAAE,OACK,SAAAC,GACL,IAAM2I,EAAc,CAClB7I,KAAM,CAAC,CACL3B,KAAM,WACNwC,GAAI,mCACJ/C,WAAY,CACVQ,MAAOuJ,MAKbtI,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,YACrCyC,KAAM0G,IAEP/I,MAAK,SAAC8B,GACLG,EAAK3C,SAAU,EAEVG,IAAAA,KAASgI,WAAUhI,IAAAA,KAASgI,SAAW,CAAC,GAC7ChI,IAAAA,KAASgI,SAAS,oCAAsCM,EAEpDtI,IAAAA,OAAaA,IAAAA,MAAUS,MAAQT,IAAAA,MAAUS,KAAKlC,aAChDyB,IAAAA,MAAUS,KAAKlC,WAAW,qBAAuB+J,EAC7C,iEACFtI,IAAAA,MAAUS,KAAKlC,WAAW,oCAAsC+J,IAIpE,IACEJ,aAAamB,QAAQ,6BAA8Bf,EACrD,CAAE,MAAOjL,GAAI,CAEb2C,IAAAA,OAAWyC,KAAK,CAAE3D,KAAM,WAAa,+BACrCD,EAAE6B,QACJ,IAAE,OACK,SAAA0B,GACLI,EAAK3C,SAAU,EAEf,IAAI0J,EAAe,gBAEnB,GAAInH,IACEA,EAAYgF,UACdmC,EAAenH,EAAYgF,SAGzBhF,EAAYC,UACd,IACE,GAAID,EAAYC,SAAS5B,MACnB2B,EAAYC,SAAS5B,KAAK6B,QAAUF,EAAYC,SAAS5B,KAAK6B,OAAOX,OAAS,EAAG,CACnF,IAAM6H,EAAgBpH,EAAYC,SAAS5B,KAAK6B,OAAO,GACvDiH,EAAeC,EAAcjH,QAAUiH,EAAc9K,OAAS6K,CAChE,CAEJ,CAAE,MAAOlM,GAAI,CAIjB,IACO2C,IAAAA,KAASgI,WAAUhI,IAAAA,KAASgI,SAAW,CAAC,GAC7ChI,IAAAA,KAASgI,SAAS,oCAAsCM,EAEpDtI,IAAAA,OAAaA,IAAAA,MAAUS,MAAQT,IAAAA,MAAUS,KAAKlC,aAChDyB,IAAAA,MAAUS,KAAKlC,WAAW,qBAAuB+J,EAC7C,iEACFtI,IAAAA,MAAUS,KAAKlC,WAAW,oCAAsC+J,IAIpE9F,EAAK8F,WAAaA,EAElB,IACEJ,aAAamB,QAAQ,6BAA8Bf,EACrD,CAAE,MAAOjL,GAAI,CACf,CAAE,MAAOoM,GAAa,CAEtBzJ,IAAAA,OAAWyC,KAAK,CAAE3D,KAAM,SAAW,4BAA8ByK,EACnE,GACF,GAxHwB,CAyH1B,EAACvL,EAEDiL,eAAA,WAAiB,IAAAjG,EAAA,KACf,OAA8B,IAA1B7E,KAAKkK,UAAU1G,OACV,KAIP9C,EAAA,OAAKJ,UAAU,mBACbI,EAAA,OAAKJ,UAAU,iBAAiBU,QAAS,WAAF,OAAQ6D,EAAK0G,WAAW,SAAS,GACtE7K,EAAA,KAAGJ,UAAU,gBAAkB,IAAEuB,IAAAA,WAAemB,MAAM,kDAGvDhD,KAAKkK,UAAUjH,KAAI,SAACuI,EAAM9G,GAAK,OAC9BhE,EAAA,OAAKJ,UAAU,iBAAiBU,QAAS,WAAF,OAAQ6D,EAAK0G,WAAWC,EAAK7K,KAAM6K,EAAM9G,EAAM,GACnFG,EAAK4G,eAAeD,EAAK7K,MAAM,IAAE6K,EAAKnL,KACnC,IAId,EAACR,EAED4L,eAAA,SAAe9K,GACb,OAAQA,GACN,IAAK,SACH,OAAOD,EAAA,KAAGJ,UAAU,eACtB,IAAK,QACH,OAAOI,EAAA,KAAGJ,UAAU,wBACtB,IAAK,UACH,OAAOI,EAAA,KAAGJ,UAAU,gBACtB,IAAK,QACH,OAAOI,EAAA,KAAGJ,UAAU,gBACtB,QACE,OAAOI,EAAA,KAAGJ,UAAU,kBAE1B,EAACT,EAED0L,WAAA,SAAWtB,EAASuB,EAAa9G,QAAT,IAAJ8G,IAAAA,EAAO,WAAW,IAAL9G,IAAAA,EAAQ,MACvC1E,KAAKiK,QAAUA,EAED,OAAVvF,EACF1E,KAAKkK,UAAYlK,KAAKkK,UAAUwB,MAAM,EAAGhH,EAAQ,GAC5B,WAAZuF,IACTjK,KAAKkK,UAAY,IAGnBxJ,EAAE6B,QACJ,EAAC1C,EAEDkL,aAAA,WACE,OAAQ/K,KAAKiK,SACX,IAAK,SACH,OAAOjK,KAAK2L,iBACd,IAAK,SACH,OAAOjL,EAACY,EAAS,CAACE,QAASxB,KAAKkK,UAAU,GAAG/G,GAAII,SAAUvD,KAAK4L,YAAYxM,KAAKY,QACnF,IAAK,QACH,OAAOU,EAAC6E,EAAQ,CAACC,QAASxF,KAAKkK,UAAU,GAAG/G,GAAII,SAAUvD,KAAK6L,WAAWzM,KAAKY,QACjF,IAAK,UACH,OAAOU,EAACmG,EAAU,CAACC,OAAQ9G,KAAKkK,UAAU,GAAG/G,GAAII,SAAUvD,KAAK8L,aAAa1M,KAAKY,QACpF,IAAK,QACH,OAAOU,EAACgH,EAAQ,CAACC,SAAU3H,KAAKkK,UAAU,GAAG/G,GAAI+F,SAAUlJ,KAAK+L,iBAAiB3M,KAAKY,QACxF,QACE,OAAOU,EAAA,WAAK,mBAElB,EAACb,EAED8L,eAAA,WAAiB,IAAAzG,EAAA,KACf,OACExE,EAAA,OAAKJ,UAAU,aACbI,EAAA,UAAKmB,IAAAA,WAAemB,MAAM,6CAC1BtC,EAAA,KAAGJ,UAAU,YAAYuB,IAAAA,WAAemB,MAAM,iDAE9CtC,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,cACbI,EAAA,aAAQmB,IAAAA,WAAemB,MAAM,+CAC7BtC,EAAA,SACEC,KAAK,OACLL,UAAU,cACVM,MAAOZ,KAAKgM,UAAY,GACxBnL,QAAS,SAAA3B,GAAC,OAAIgG,EAAK8G,SAAW9M,EAAE4B,OAAOF,KAAK,EAC5CgC,YAAaf,IAAAA,WAAemB,MAAM,qDAIrCjC,IAAAA,UAAiB,CAChBT,UAAW,yBACXuC,SAAU7C,KAAK0B,UAAY1B,KAAKgM,UAAqC,KAAzBhM,KAAKgM,SAASrI,OAC1D3C,QAAS,WAAF,OAAQkE,EAAK+G,WAAW,EAC/B7I,KAAM,eACLvB,IAAAA,WAAemB,MAAM,mDAG1BtC,EAAA,OAAKJ,UAAU,wBACbI,EAAA,SAAOJ,UAAU,eACfI,EAAA,aACEA,EAAA,UACEA,EAAA,UAAKmB,IAAAA,WAAemB,MAAM,gDAAiD,CAAC,EAAG,eAC/EtC,EAAA,MAAIJ,UAAU,WAAWuB,IAAAA,WAAemB,MAAM,6CAA8C,CAAC,EAAG,cAGpGtC,EAAA,aACGV,KAAKsK,QAAUtK,KAAKsK,OAAOrH,KAAI,SAAAhD,GAAK,OACnCS,EAAA,MAAIxC,IAAK+B,EAAMkD,IACbzC,EAAA,UAAKT,EAAMG,WAAWC,MACtBK,EAAA,MAAIJ,UAAU,WACXS,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,cACNpC,QAAS,WAAF,OAAQkE,EAAKgH,UAAUjM,EAAM,EACpCM,MAAOsB,IAAAA,WAAemB,MAAM,mDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,eACNpC,QAAS,WAAF,OAAQkE,EAAKiH,YAAYlM,EAAM,EACtCM,MAAOsB,IAAAA,WAAemB,MAAM,qDAG7BjC,IAAAA,UAAiB,CAChBT,UAAW,sBACX8C,KAAM,qBACNpC,QAAS,WAAF,OAAQkE,EAAKkH,YAAYnM,EAAM,EACtCM,MAAOsB,IAAAA,WAAemB,MAAM,2DAG7B,MAGJhD,KAAKsK,QAAiC,IAAvBtK,KAAKsK,OAAO9G,SAC5B9C,EAAA,UACEA,EAAA,MAAI+C,QAAQ,IAAInD,UAAU,eACvBuB,IAAAA,WAAemB,MAAM,qDASxC,EAACnD,EAEDuM,YAAA,SAAYnM,GACVD,KAAKkK,UAAY,CACf,CAAEvJ,KAAM,SAAUwC,GAAIlD,EAAMkD,GAAI9C,KAAMJ,EAAMG,WAAWC,OAEzDL,KAAKiK,QAAU,SACfvJ,EAAE6B,QACJ,EAAC1C,EAED+L,YAAA,SAAY1I,GACVlD,KAAKkK,UAAUlG,KACb,CAAErD,KAAM,QAASwC,GAAID,EAAMC,GAAI9C,KAAM6C,EAAM9C,WAAWC,OAExDL,KAAKiK,QAAU,QACfvJ,EAAE6B,QACJ,EAAC1C,EAEDgM,WAAA,SAAWxF,GACTrG,KAAKkK,UAAUlG,KACb,CAAErD,KAAM,UAAWwC,GAAIkD,EAAKlD,GAAI9C,KAAMgG,EAAKjG,WAAWkG,aAExDtG,KAAKiK,QAAU,UACfvJ,EAAE6B,QACJ,EAAC1C,EAEDiM,aAAA,SAAa3E,GACX,GAAKA,GAAWA,EAAOhE,GAKvB,IACEnD,KAAKkK,UAAUlG,KACb,CAAErD,KAAM,QAASwC,GAAIgE,EAAOhE,GAAI9C,KAAM8G,EAAO/G,WAAWC,OAE1DL,KAAKiK,QAAU,QACfvJ,EAAE6B,QACJ,CAAE,MAAOC,GACPC,MAAM,kCAAoCD,EAAMyG,QAClD,MAZExG,MAAM,6DAaV,EAAC5C,EAEDoM,UAAA,WAAY,IAAA5G,EAAA,KACV,GAAKrF,KAAKgM,UAAahM,KAAKgM,SAASrI,OAArC,CAKA,IAAM0I,EAAYrM,KAAKgM,SAASrI,OAChC3D,KAAK0B,SAAU,EAEf,IAAMK,EAAMF,IAAAA,MAAUG,UAAU,UAAY,uBAAyB6B,mBAAmBwI,GAExFxK,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKA,IACJK,MAAK,SAAAC,GACNgD,EAAKiF,OAAOtG,KAAK3B,EAAOC,MACxB+C,EAAK2G,SAAW,GAChB3G,EAAK3D,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACPX,IAAAA,QAAY,CACVC,OAAQ,OACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,mBACpCI,MAAK,SAAAC,GACNgD,EAAKiF,OAAOtG,KAAK3B,EAAOC,MACxB+C,EAAK2G,SAAW,GAChB3G,EAAK3D,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAA0B,GACPoB,EAAK3D,SAAU,EACfhB,EAAE6B,SACFE,MAAM,wBAA0BD,EAAM0B,UAAY1B,EAAM0B,SAASC,OAAS3B,EAAM0B,SAASC,OAAO,GAAGC,OAAS5B,GAC9G,GACF,GA7BA,MAFEC,MAAM,6BAgCV,EAAC5C,EAEDqM,UAAA,SAAUjM,GAAO,IAAAsJ,EAAA,KACf1H,IAAAA,MAAUyC,KAAK7E,EAAgB,CAC7BQ,MAAOA,EACPgB,SAAU,SAACd,GACT,GAAKA,GAAWA,IAAYF,EAAMG,WAAWC,KAA7C,CAEAkJ,EAAK7H,SAAU,EAEf,IAAM8C,EAAc,CAClBlC,KAAM,CACJ3B,KAAM,gBACNwC,GAAIlD,EAAMkD,GACV/C,WAAY,CACVC,KAAMF,EAAQwD,UAKpB9B,IAAAA,QAAY,CACVC,OAAQ,QACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,kBAAoB/B,EAAMkD,GAC/DsB,KAAMD,IACLpC,MAAK,SAAAC,GACN,IAAMqC,EAAQ6E,EAAKe,OAAO3F,WAAU,SAAA2H,GAAC,OAAIA,EAAEnJ,KAAOlD,EAAMkD,EAAE,KAC3C,IAAXuB,IACF6E,EAAKe,OAAO5F,GAASrC,EAAOC,MAE9BiH,EAAK7H,SAAU,EACfhB,EAAE6B,SACFgH,EAAKc,aACLxI,IAAAA,OAAWyC,KAAK,CAAC3D,KAAM,WAAY,kCAAkCR,EAAQwD,OAC/E,IAAE,OAAO,SAAAnB,GACP+G,EAAK7H,SAAU,EACfhB,EAAE6B,SACFE,MAAM,0BAA4BD,EAAM0B,UAAY1B,EAAM0B,SAASC,OAAS3B,EAAM0B,SAASC,OAAO,GAAGC,OAAS5B,GAChH,GA/ByD,CAgC3D,GAEJ,EAAC3C,EAEDsM,YAAA,SAAYlM,GAAO,IAAAsM,EAAA,KACjB1K,IAAAA,MAAUyC,KAAKlD,EAAkB,CAC/BnB,MAAOA,EACPoB,UAAW,WACTkL,EAAK7K,SAAU,EAEfG,IAAAA,QAAY,CACVC,OAAQ,SACRC,IAAKF,IAAAA,MAAUG,UAAU,UAAY,kBAAoB/B,EAAMkD,KAC9Df,MAAK,WACNmK,EAAKjC,OAASiC,EAAKjC,OAAOpI,QAAO,SAAAoK,GAAC,OAAIA,EAAEnJ,KAAOlD,EAAMkD,EAAE,IACvDoJ,EAAK7K,SAAU,EACfhB,EAAE6B,QACJ,IAAE,OAAO,SAAAC,GACP+J,EAAK7K,SAAU,EACfhB,EAAE6B,SACFE,MAAM,0BAA4BD,EAAM0B,UAAY1B,EAAM0B,SAASC,OAAS3B,EAAM0B,SAASC,OAAO,GAAGC,OAAS5B,GAChH,GACF,GAEJ,EAAC3C,EAEDkM,iBAAA,SAAiBzJ,GACXA,GAAQA,EAAK6G,QAAU7G,EAAKqF,WAC9B3H,KAAKiK,QAAU,QACfvJ,EAAE6B,SAEN,EAACiH,CAAA,CA/jBoC,CAASgD,KCThD3K,IAAAA,aAAiB4K,IAAI,yBAAyB,WAC5C5K,IAAAA,cAAiB,IACV,yBACJ6K,aAAalD,EAClB,G","sources":["webpack://@ltydi/canbus-settings/webpack/bootstrap","webpack://@ltydi/canbus-settings/webpack/runtime/compat get default export","webpack://@ltydi/canbus-settings/webpack/runtime/define property getters","webpack://@ltydi/canbus-settings/webpack/runtime/hasOwnProperty shorthand","webpack://@ltydi/canbus-settings/external root \"flarum.core.compat['admin/app']\"","webpack://@ltydi/canbus-settings/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@ltydi/canbus-settings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@ltydi/canbus-settings/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@ltydi/canbus-settings/external root \"flarum.core.compat['common/components/Button']\"","webpack://@ltydi/canbus-settings/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@ltydi/canbus-settings/external root \"flarum.core.compat['common/Component']\"","webpack://@ltydi/canbus-settings/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@ltydi/canbus-settings/./src/admin/components/EditBrandModal.js","webpack://@ltydi/canbus-settings/./src/admin/components/DeleteBrandModal.js","webpack://@ltydi/canbus-settings/./src/admin/components/ModelList.js","webpack://@ltydi/canbus-settings/external assign \"jQuery\"","webpack://@ltydi/canbus-settings/./src/admin/components/YearList.js","webpack://@ltydi/canbus-settings/./src/admin/components/ConfigList.js","webpack://@ltydi/canbus-settings/./src/admin/components/LinkList.js","webpack://@ltydi/canbus-settings/./src/admin/components/CanBusSettingsPage.js","webpack://@ltydi/canbus-settings/./admin.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/admin/app';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nexport default class EditBrandModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.brand = this.attrs.brand;\r\n    this.newName = this.brand.attributes.name || '';\r\n  }\r\n  \r\n  className() {\r\n    return 'EditBrandModal Modal--small';\r\n  }\r\n  \r\n  title() {\r\n    return 'Edit Brand';\r\n  }\r\n  \r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <div className=\"Form-group\">\r\n            <label>Brand Name</label>\r\n            <input \r\n              className=\"FormControl\" \r\n              type=\"text\" \r\n              value={this.newName} \r\n              oninput={e => this.newName = e.target.value} \r\n            />\r\n          </div>\r\n          \r\n          <div className=\"Form-group\">\r\n            <Button\r\n              className=\"Button Button--primary\"\r\n              type=\"submit\"\r\n              onclick={() => {\r\n                this.attrs.onsubmit(this.newName);\r\n                this.hide();\r\n              }}\r\n            >\r\n              Save Changes\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n} ","import app from 'flarum/admin/app';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nexport default class DeleteBrandModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.brand = this.attrs.brand;\r\n  }\r\n  \r\n  className() {\r\n    return 'DeleteBrandModal Modal--small';\r\n  }\r\n  \r\n  title() {\r\n    return 'Confirm Deletion';\r\n  }\r\n  \r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <p>Are you sure you want to delete the brand \"{this.brand.attributes.name}\"? This will also delete all associated models, years, configs, and links.</p>\r\n        \r\n        <div className=\"Form-group\">\r\n          <Button\r\n            className=\"Button Button--primary Button--danger\"\r\n            onclick={() => {\r\n              this.attrs.onconfirm();\r\n              this.hide();\r\n            }}\r\n          >\r\n            Delete\r\n          </Button>\r\n          {' '}\r\n          <Button\r\n            className=\"Button\"\r\n            onclick={() => this.hide()}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n} ","import app from 'flarum/admin/app';\r\nimport Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport Modal from 'flarum/common/components/Modal';\r\n\r\nexport default class ModelList extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    \r\n    this.brandId = this.attrs.brandId;\r\n    this.models = [];\r\n    this.loading = true;\r\n    this.newModel = '';\r\n    \r\n    this.loadModels();\r\n  }\r\n  \r\n  loadModels() {\r\n    this.loading = true;\r\n    \r\n    app.request({\r\n      method: 'GET',\r\n      url: app.forum.attribute('apiUrl') + '/canbus/models',\r\n      params: {\r\n        filter: { brand_id: this.brandId }\r\n      }\r\n    }).then(result => {\r\n      this.models = result.data;\r\n      this.loading = false;\r\n      m.redraw();\r\n    }).catch(error => {\r\n      this.loading = false;\r\n      m.redraw();\r\n      alert('Error loading models: ' + error);\r\n    });\r\n  }\r\n  \r\n  view() {\r\n    return (\r\n      <div className=\"ModelList\">\r\n        <h3>Car Models</h3>\r\n        \r\n        <div className=\"CanBusForm\">\r\n          <div className=\"form-group\">\r\n            <label>Add New Model</label>\r\n            <input \r\n              type=\"text\" \r\n              className=\"FormControl\" \r\n              value={this.newModel} \r\n              oninput={e => this.newModel = e.target.value} \r\n              placeholder=\"Enter model name\" \r\n            />\r\n          </div>\r\n          \r\n          {Button.component({\r\n            className: 'Button Button--primary',\r\n            disabled: this.loading,\r\n            onclick: () => this.saveModel(),\r\n          }, 'Add Model')}\r\n        </div>\r\n        \r\n        {this.loading ? (\r\n          <LoadingIndicator />\r\n        ) : (\r\n          <table className=\"CanBusTable\">\r\n            <thead>\r\n              <tr>\r\n                <th>{app.translator.trans('ltydi-canbus-settings.admin.models.model_name')}</th>\r\n                <th className=\"actions\">{app.translator.trans('ltydi-canbus-settings.admin.common.actions')}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.models.map(model => (\r\n                <tr key={model.id}>\r\n                  <td>{model.attributes.name}</td>\r\n                  <td className=\"actions\">\r\n                    {Button.component({\r\n                      className: 'Button Button--icon',\r\n                      icon: 'fas fa-edit',\r\n                      onclick: () => this.editModel(model),\r\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.edit_title')\r\n                    })}\r\n                    \r\n                    {Button.component({\r\n                      className: 'Button Button--icon',\r\n                      icon: 'fas fa-trash',\r\n                      onclick: () => this.deleteModel(model),\r\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.delete_title')\r\n                    })}\r\n                    \r\n                    {Button.component({\r\n                      className: 'Button Button--icon',\r\n                      icon: 'fas fa-arrow-right',\r\n                      onclick: () => this.attrs.onSelect(model),\r\n                      title: app.translator.trans('ltydi-canbus-settings.admin.models.view_years_title')\r\n                    })}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              \r\n              {this.models.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"2\" className=\"text-center\">\r\n                    {app.translator.trans('ltydi-canbus-settings.admin.models.no_models')}\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  saveModel() {\r\n    if (!this.newModel.trim()) {\r\n      alert('Model name cannot be empty');\r\n      return;\r\n    }\r\n    \r\n    const modelName = this.newModel.trim();\r\n    this.loading = true;\r\n    \r\n    // Using URL parameters to pass model name and brand ID\r\n    const url = app.forum.attribute('apiUrl') + '/canbus/models?name=' + \r\n      encodeURIComponent(modelName) + '&brand_id=' + encodeURIComponent(this.brandId);\r\n    \r\n    console.log('Adding model:', modelName, 'for brand ID:', this.brandId);\r\n    \r\n    app.request({\r\n      method: 'POST',\r\n      url: url\r\n    }).then(result => {\r\n      this.models.push(result.data);\r\n      this.newModel = '';\r\n      this.loading = false;\r\n      m.redraw();\r\n    }).catch(error => {\r\n      console.error('Error adding model:', error);\r\n      \r\n      // If failed, try using hardcoded method\r\n      app.request({\r\n        method: 'POST',\r\n        url: app.forum.attribute('apiUrl') + '/canbus/models'\r\n      }).then(result => {\r\n        this.models.push(result.data);\r\n        this.newModel = '';\r\n        this.loading = false;\r\n        m.redraw();\r\n      }).catch(secondError => {\r\n        console.error('Second attempt failed:', secondError);\r\n        this.loading = false;\r\n        m.redraw();\r\n        alert('Error adding model: ' + (error.response && error.response.errors ? error.response.errors[0].detail : error));\r\n      });\r\n    });\r\n  }\r\n  \r\n  editModel(model) {\r\n    app.modal.show(EditModelModal, {\r\n      model: model,\r\n      onsubmit: (newName) => {\r\n        if (!newName || newName === model.attributes.name) return;\r\n        \r\n        this.loading = true;\r\n        \r\n        const requestData = {\r\n          data: {\r\n            type: 'canbus-models',\r\n            id: model.id,\r\n            attributes: {\r\n              name: newName.trim()\r\n            }\r\n          }\r\n        };\r\n        \r\n        app.request({\r\n          method: 'PATCH',\r\n          url: app.forum.attribute('apiUrl') + '/canbus/models/' + model.id,\r\n          body: requestData\r\n        }).then(result => {\r\n          const index = this.models.findIndex(m => m.id === model.id);\r\n          if (index !== -1) {\r\n            this.models[index] = result.data;\r\n          }\r\n          this.loading = false;\r\n          m.redraw();\r\n          \r\n          // Force refresh model list\r\n          this.loadModels(true);\r\n          \r\n          app.alerts.show({type: 'success'}, `Model updated successfully to: ${newName.trim()}`);\r\n        }).catch(error => {\r\n          console.error('Error updating model:', error);\r\n          console.error('Response:', error.response);\r\n          this.loading = false;\r\n          m.redraw();\r\n          alert('Error updating model: ' + (error.response?.errors?.[0]?.detail || error));\r\n        });\r\n      }\r\n    });\r\n  }\r\n  \r\n  deleteModel(model) {\r\n    app.modal.show(DeleteModelModal, {\r\n      model: model,\r\n      onconfirm: () => {\r\n        this.loading = true;\r\n        \r\n        console.log('Deleting model with ID:', model.id);\r\n        console.log('Request URL:', app.forum.attribute('apiUrl') + '/canbus/models/' + model.id);\r\n        console.log('Request method: DELETE');\r\n        \r\n        app.request({\r\n          method: 'DELETE',\r\n          url: app.forum.attribute('apiUrl') + '/canbus/models/' + model.id\r\n        }).then(() => {\r\n          console.log('Model deleted successfully');\r\n          this.models = this.models.filter(m => m.id !== model.id);\r\n          this.loading = false;\r\n          m.redraw();\r\n        }).catch(error => {\r\n          console.error('Error deleting model:', error);\r\n          console.error('Response:', error.response);\r\n          this.loading = false;\r\n          m.redraw();\r\n          alert('Error deleting model: ' + (error.response?.errors?.[0]?.detail || error));\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Edit Model Modal\r\nclass EditModelModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.model = this.attrs.model;\r\n    this.newName = this.model.attributes.name || '';\r\n  }\r\n  \r\n  className() {\r\n    return 'EditModelModal Modal--small';\r\n  }\r\n  \r\n  title() {\r\n    return 'Edit Model';\r\n  }\r\n  \r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <div className=\"Form-group\">\r\n            <label>Model Name</label>\r\n            <input \r\n              className=\"FormControl\" \r\n              type=\"text\" \r\n              value={this.newName} \r\n              oninput={e => this.newName = e.target.value} \r\n            />\r\n          </div>\r\n          \r\n          <div className=\"Form-group\">\r\n            <Button\r\n              className=\"Button Button--primary\"\r\n              type=\"submit\"\r\n              onclick={() => {\r\n                this.attrs.onsubmit(this.newName);\r\n                this.hide();\r\n              }}\r\n            >\r\n              Save Changes\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Delete Model Modal\r\nclass DeleteModelModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.model = this.attrs.model;\r\n  }\r\n  \r\n  className() {\r\n    return 'DeleteModelModal Modal--small';\r\n  }\r\n  \r\n  title() {\r\n    return 'Confirm Deletion';\r\n  }\r\n  \r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <p>Are you sure you want to delete the model \"{this.model.attributes.name}\"? This will also delete all associated years, configs and links.</p>\r\n        \r\n        <div className=\"Form-group\">\r\n          <Button\r\n            className=\"Button Button--primary Button--danger\"\r\n            onclick={() => {\r\n              this.attrs.onconfirm();\r\n              this.hide();\r\n            }}\r\n          >\r\n            Delete\r\n          </Button>\r\n          {' '}\r\n          <Button\r\n            className=\"Button\"\r\n            onclick={() => this.hide()}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport $ from 'jquery';\nimport Modal from 'flarum/common/components/Modal';\n\nexport default class YearList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    \n    this.modelId = this.attrs.modelId;\n    this.years = [];\n    this.loading = true;\n    this.newYearRange = '';\n    \n    // Add editing state variables\n    this.editingYearId = null;\n    this.editYearRange = '';\n    \n    this.loadYears();\n  }\n\n  // 当接收到新的modelId时触发\n  onupdate(vnode) {\n    if (this.modelId !== this.attrs.modelId) {\n      this.modelId = this.attrs.modelId;\n      this.years = [];\n      this.loading = true;\n      this.loadYears();\n    }\n  }\n  \n  loadYears(forceRefresh = false) {\n    if (!this.modelId) {\n      this.years = [];\n      this.loading = false;\n      m.redraw();\n      return;\n    }\n    \n    this.loading = true;\n    \n    // Create request URL and parameters\n    const url = app.forum.attribute('apiUrl') + '/canbus/years';\n    const params = {\n      'filter[model_id]': this.modelId\n    };\n    \n    // Add timestamp parameter to avoid cache\n    if (forceRefresh) {\n      params._nocache = new Date().getTime();\n    }\n    \n    app.request({\n      method: 'GET',\n      url: url,\n      params: params,\n      // Add request headers to disable cache\n      headers: forceRefresh ? {\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache', \n        'Expires': '0'\n      } : {}\n    }).then(result => {\n      this.years = result.data || [];\n      this.loading = false;\n      m.redraw();\n    }).catch(error => {\n      this.years = [];\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  \n  view() {\n    if (!this.modelId) {\n      return <div className=\"YearList\">\n        <p>Please select a model first.</p>\n      </div>;\n    }\n    \n    return (\n      <div className=\"YearList\">\n        <h3>Year Ranges</h3>\n        \n        <div className=\"CanBusForm\">\n          <div className=\"form-group\">\n            <label>Add New Year Range</label>\n            <input \n              type=\"text\" \n              className=\"FormControl\" \n              value={this.newYearRange} \n              oninput={e => this.newYearRange = e.target.value} \n              placeholder=\"e.g. 2010-2015\" \n            />\n          </div>\n          \n          <Button\n            className=\"Button Button--primary\"\n            disabled={this.loading}\n            onclick={() => this.saveYear()}\n          >\n            Add Year Range\n          </Button>\n        </div>\n        \n        {this.loading ? (\n          <LoadingIndicator />\n        ) : (\n          <table className=\"CanBusTable\">\n            <thead>\n              <tr>\n                <th>{app.translator.trans('ltydi-canbus-settings.admin.years.year_range')}</th>\n                <th className=\"actions\">{app.translator.trans('ltydi-canbus-settings.admin.common.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.years.map(year => (\n                <tr key={year.id}>\n                  <td>{year.attributes.year_range}</td>\n                  <td className=\"actions\">\n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-edit',\n                      onclick: () => this.editYear(year),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.edit_title')\n                    })}\n                    \n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-trash',\n                      onclick: () => this.deleteYear(year),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.delete_title')\n                    })}\n                    \n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-arrow-right',\n                      onclick: () => this.attrs.onSelect(year),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.years.view_configs_title')\n                    })}\n                  </td>\n                </tr>\n              ))}\n              \n              {this.years.length === 0 && (\n                <tr>\n                  <td colSpan=\"2\" className=\"text-center\">\n                    {app.translator.trans('ltydi-canbus-settings.admin.years.no_years')}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        )}\n      </div>\n    );\n  }\n  \n  saveYear() {\n    if (!this.newYearRange || !this.newYearRange.trim()) return;\n    \n    this.loading = true;\n    \n    const requestData = {\n      data: {\n        type: 'canbus-years',\n        attributes: {\n          year_range: this.newYearRange.trim()\n        },\n        relationships: {\n          model: {\n            data: {\n              type: 'canbus-models',\n              id: this.modelId\n            }\n          }\n        }\n      }\n    };\n    \n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/canbus/years',\n      body: requestData\n    }).then(result => {\n      this.years.push(result.data);\n      this.newYearRange = '';\n      this.loading = false;\n      m.redraw();\n    }).catch(error => {\n      this.loading = false;\n      m.redraw();\n      alert('Error adding year: ' + (error.response?.errors?.[0]?.detail || error));\n    });\n  }\n  \n  deleteYear(year) {\n    app.modal.show(DeleteYearModal, {\n      year: year,\n      onconfirm: () => {\n        this.loading = true;\n        \n        app.request({\n          method: 'DELETE',\n          url: app.forum.attribute('apiUrl') + '/canbus/years/' + year.id\n        }).then(() => {\n          this.years = this.years.filter(y => y.id !== year.id);\n          this.loading = false;\n          m.redraw();\n        }).catch(error => {\n          this.loading = false;\n          m.redraw();\n          alert('Error deleting year: ' + error);\n        });\n      }\n    });\n  }\n  \n  editYear(year) {\n    app.modal.show(EditYearModal, {\n      year: year,\n      onsubmit: (newYearRange) => {\n        if (!newYearRange || newYearRange === year.attributes.year_range) return;\n        \n        this.loading = true;\n        \n        const requestData = {\n          data: {\n            type: 'canbus-years',\n            id: year.id,\n            attributes: {\n              year_range: newYearRange.trim()\n            }\n          }\n        };\n        \n        // Ensure year.id is valid\n        if (!year.id) {\n          alert('Error: Year ID cannot be empty');\n          this.loading = false;\n          m.redraw();\n          return;\n        }\n        \n        app.request({\n          method: 'PATCH',\n          url: app.forum.attribute('apiUrl') + '/canbus/years/' + year.id,\n          body: requestData\n        }).then(result => {\n          // Update local data\n          const index = this.years.findIndex(y => y.id === year.id);\n          if (index !== -1) {\n            this.years[index] = result.data;\n          }\n          \n          this.loading = false;\n          m.redraw();\n          \n          // Force refresh year list\n          this.loadYears(true);\n          \n          app.alerts.show({type: 'success'}, `Year range updated successfully to: ${newYearRange.trim()}`);\n        }).catch(error => {\n          this.loading = false;\n          m.redraw();\n          \n          alert('Error updating year: ' + (error.response?.errors?.[0]?.detail || error));\n        });\n      }\n    });\n  }\n}\n\n// Edit Year Modal\nclass EditYearModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.year = this.attrs.year;\n    this.newYearRange = this.year.attributes.year_range || '';\n  }\n  \n  className() {\n    return 'EditYearModal Modal--small';\n  }\n  \n  title() {\n    return 'Edit Year Range';\n  }\n  \n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <label>Year Range</label>\n            <input \n              className=\"FormControl\" \n              type=\"text\" \n              value={this.newYearRange} \n              oninput={e => this.newYearRange = e.target.value} \n              placeholder=\"e.g. 2010-2015\"\n            />\n          </div>\n          \n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary\"\n              type=\"submit\"\n              onclick={() => {\n                this.attrs.onsubmit(this.newYearRange);\n                this.hide();\n              }}\n            >\n              Save Changes\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Delete Year Modal\nclass DeleteYearModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.year = this.attrs.year;\n  }\n  \n  className() {\n    return 'DeleteYearModal Modal--small';\n  }\n  \n  title() {\n    return 'Confirm Deletion';\n  }\n  \n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>Are you sure you want to delete the year range \"{this.year.attributes.year_range}\"? This will also delete all associated configs and links.</p>\n        \n        <div className=\"Form-group\">\n          <Button\n            className=\"Button Button--primary Button--danger\"\n            onclick={() => {\n              this.attrs.onconfirm();\n              this.hide();\n            }}\n          >\n            Delete\n          </Button>\n          {' '}\n          <Button\n            className=\"Button\"\n            onclick={() => this.hide()}\n          >\n            Cancel\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Modal from 'flarum/common/components/Modal';\n\nexport default class ConfigList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    \n    this.yearId = this.attrs.yearId;\n    this.configs = [];\n    this.loading = true;\n    this.newConfigName = '';\n    \n    this.loadConfigs();\n  }\n  \n  loadConfigs(forceRefresh = false) {\n    if (!this.yearId) {\n      this.configs = [];\n      this.loading = false;\n      m.redraw();\n      return;\n    }\n    \n    this.loading = true;\n    \n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/canbus/configs',\n      params: {\n        'filter[year_id]': this.yearId\n      }\n    }).then(result => {\n      this.configs = result.data || [];\n      this.loading = false;\n      m.redraw();\n      \n      if (forceRefresh) {\n        this.loadConfigs(false);\n      }\n    }).catch(error => {\n      this.configs = [];\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  \n  view() {\n    if (!this.yearId) {\n      return <div className=\"ConfigList\">\n        <p>Please select a year first.</p>\n      </div>;\n    }\n    \n    return (\n      <div className=\"ConfigList\">\n        <h3>Configuration List</h3>\n        \n        <div className=\"CanBusForm\">\n          <div className=\"form-group\">\n            <label>Add New Configuration</label>\n            <input \n              type=\"text\" \n              className=\"FormControl\" \n              value={this.newConfigName} \n              oninput={e => this.newConfigName = e.target.value} \n              placeholder=\"e.g. Manual AC\" \n            />\n          </div>\n          \n          <Button\n            className=\"Button Button--primary\"\n            disabled={this.loading}\n            onclick={() => this.saveConfig()}\n          >\n            Add Configuration\n          </Button>\n        </div>\n        \n        {this.loading ? (\n          <LoadingIndicator />\n        ) : (\n          <table className=\"CanBusTable\">\n            <thead>\n              <tr>\n                <th>{app.translator.trans('ltydi-canbus-settings.admin.configs.config_name')}</th>\n                <th className=\"actions\">{app.translator.trans('ltydi-canbus-settings.admin.common.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.configs.map(config => (\n                <tr key={config.id}>\n                  <td>{config.attributes.name}</td>\n                  <td className=\"actions\">\n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-edit',\n                      onclick: () => this.editConfig(config),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.edit_title')\n                    })}\n                    \n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-trash',\n                      onclick: () => this.deleteConfig(config),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.delete_title')\n                    })}\n                    \n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-arrow-right',\n                      onclick: () => this.attrs.onSelect(config),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.configs.view_links_title')\n                    })}\n                  </td>\n                </tr>\n              ))}\n              \n              {this.configs.length === 0 && (\n                <tr>\n                  <td colSpan=\"2\" className=\"text-center\">\n                    {app.translator.trans('ltydi-canbus-settings.admin.configs.no_configs')}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        )}\n      </div>\n    );\n  }\n  \n  saveConfig() {\n    if (!this.newConfigName || !this.newConfigName.trim()) return;\n    \n    this.loading = true;\n    \n    const requestData = {\n      data: {\n        type: 'canbus-configs',\n        attributes: {\n          name: this.newConfigName.trim()\n        },\n        relationships: {\n          year: {\n            data: {\n              type: 'canbus-years',\n              id: this.yearId\n            }\n          }\n        }\n      }\n    };\n    \n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/canbus/configs',\n      body: requestData\n    }).then(result => {\n      this.configs.push(result.data);\n      this.newConfigName = '';\n      this.loading = false;\n      m.redraw();\n    }).catch(error => {\n      this.loading = false;\n      m.redraw();\n      alert('Error adding configuration: ' + (error.response?.errors?.[0]?.detail || error));\n    });\n  }\n  \n  editConfig(config) {\n    app.modal.show(EditConfigModal, {\n      config: config,\n      onsubmit: (newName) => {\n        if (!newName || newName === config.attributes.name) return;\n        \n        this.loading = true;\n        \n        const requestData = {\n          data: {\n            type: 'canbus-configs',\n            id: config.id,\n            attributes: {\n              name: newName.trim()\n            }\n          }\n        };\n        \n        app.request({\n          method: 'PATCH',\n          url: app.forum.attribute('apiUrl') + '/canbus/configs/' + config.id,\n          body: requestData\n        }).then(result => {\n          const index = this.configs.findIndex(c => c.id === config.id);\n          if (index !== -1) {\n            this.configs[index] = result.data;\n          }\n          this.loading = false;\n          m.redraw();\n          \n          this.loadConfigs(true);\n          \n          app.alerts.show({type: 'success'}, `Configuration updated successfully to: ${newName.trim()}`);\n        }).catch(error => {\n          this.loading = false;\n          m.redraw();\n          alert('Error updating configuration: ' + (error.response?.errors?.[0]?.detail || error));\n        });\n      }\n    });\n  }\n  \n  deleteConfig(config) {\n    app.modal.show(DeleteConfigModal, {\n      config: config,\n      onconfirm: () => {\n        this.loading = true;\n        \n        app.request({\n          method: 'DELETE',\n          url: app.forum.attribute('apiUrl') + '/canbus/configs/' + config.id\n        }).then(() => {\n          this.configs = this.configs.filter(c => c.id !== config.id);\n          this.loading = false;\n          m.redraw();\n        }).catch(error => {\n          this.loading = false;\n          m.redraw();\n          alert('Error deleting configuration: ' + (error.response?.errors?.[0]?.detail || error));\n        });\n      }\n    });\n  }\n}\n\n// Edit Config Modal\nclass EditConfigModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.config = this.attrs.config;\n    this.newName = this.config.attributes.name || '';\n  }\n  \n  className() {\n    return 'EditConfigModal Modal--small';\n  }\n  \n  title() {\n    return 'Edit Configuration';\n  }\n  \n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <label>Configuration Name</label>\n            <input \n              className=\"FormControl\" \n              type=\"text\" \n              value={this.newName} \n              oninput={e => this.newName = e.target.value} \n            />\n          </div>\n          \n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary\"\n              type=\"submit\"\n              onclick={() => {\n                this.attrs.onsubmit(this.newName);\n                this.hide();\n              }}\n            >\n              Save Changes\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Delete Config Modal\nclass DeleteConfigModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.config = this.attrs.config;\n  }\n  \n  className() {\n    return 'DeleteConfigModal Modal--small';\n  }\n  \n  title() {\n    return 'Confirm Deletion';\n  }\n  \n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>Are you sure you want to delete the configuration \"{this.config.attributes.name}\"? This will also delete all associated links.</p>\n        \n        <div className=\"Form-group\">\n          <Button\n            className=\"Button Button--primary Button--danger\"\n            onclick={() => {\n              this.attrs.onconfirm();\n              this.hide();\n            }}\n          >\n            Delete\n          </Button>\n          {' '}\n          <Button\n            className=\"Button\"\n            onclick={() => this.hide()}\n          >\n            Cancel\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}","import app from 'flarum/admin/app';\r\nimport Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport Modal from 'flarum/common/components/Modal';\r\n\r\nexport default class LinkList extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    \r\n    try {\r\n      console.log(\"LinkList initializing with attrs:\", vnode.attrs);\r\n      \r\n      this.configId = vnode.attrs ? vnode.attrs.configId : null;\r\n      console.log(\"Extracted configId:\", this.configId);\r\n      \r\n      this.links = [];\r\n      this.loading = true;\r\n      this.newLink = '';\r\n      this.newLinkDescription = '';\r\n      \r\n      if (!this.configId) {\r\n        console.error('ConfigId is missing or invalid:', this.configId, ', cannot load links');\r\n        this.loading = false;\r\n        return;\r\n      }\r\n      \r\n      setTimeout(() => {\r\n        try {\r\n          this.loadLinks();\r\n        } catch (e) {\r\n          console.error(\"Error in delayed loadLinks:\", e);\r\n          this.loading = false;\r\n          m.redraw();\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error(\"Error in LinkList initialization:\", error);\r\n      this.loading = false;\r\n    }\r\n  }\r\n  \r\n  loadLinks() {\r\n    try {\r\n      if (!this.configId) {\r\n        console.error('Attempting to load links but configId is missing');\r\n        this.links = [];\r\n        this.loading = false;\r\n        m.redraw();\r\n        return;\r\n      }\r\n      \r\n      this.loading = true;\r\n      console.log('Loading links for config ID:', this.configId);\r\n      \r\n      app.request({\r\n        method: 'GET',\r\n        url: `${app.forum.attribute('apiUrl')}/canbus/links`,\r\n        params: {\r\n          'filter[config_id]': this.configId\r\n        }\r\n      }).then(response => {\r\n        console.log('Loaded links:', response);\r\n        \r\n        if (response && response.data) {\r\n          this.links = Array.isArray(response.data) ? response.data : [];\r\n        } else {\r\n          console.warn('Response missing data property:', response);\r\n          this.links = [];\r\n        }\r\n        \r\n        this.loading = false;\r\n        m.redraw();\r\n      }).catch(error => {\r\n        console.error('Error loading links:', error);\r\n        console.error('Response:', error.response);\r\n        this.links = [];\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Unexpected error in loadLinks:\", error);\r\n      this.links = [];\r\n      this.loading = false;\r\n      m.redraw();\r\n    }\r\n  }\r\n  \r\n  view() {\r\n    try {\r\n      if (!this.configId) {\r\n        return (\r\n          <div className=\"LinkList\">\r\n            <h3>Link List</h3>\r\n            <div className=\"CanBusNoLink\">\r\n              <p>No configuration selected. Please choose a configuration first.</p>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      \r\n      const hasExistingLink = this.links && Array.isArray(this.links) && this.links.length > 0;\r\n      \r\n      return (\r\n        <div className=\"LinkList\">\r\n          <h3>Link List</h3>\r\n          \r\n          {!hasExistingLink && !this.loading && (\r\n            <div className=\"CanBusForm\">\r\n              <div className=\"form-group\">\r\n                <label>Add Link</label>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"FormControl\" \r\n                  value={this.newLink} \r\n                  oninput={e => this.newLink = e.target.value} \r\n                  placeholder=\"https://example.com/canbus-link\" \r\n                />\r\n                \r\n                <label style={{ marginTop: '10px' }}>Link Description</label>\r\n                <textarea\r\n                  className=\"FormControl\"\r\n                  value={this.newLinkDescription || \"\"}\r\n                  oninput={e => this.newLinkDescription = e.target.value}\r\n                  placeholder=\"Optional: Add a description for this link\"\r\n                  rows=\"3\"\r\n                />\r\n              </div>\r\n              \r\n              <Button\r\n                className=\"Button Button--primary\"\r\n                disabled={this.loading}\r\n                onclick={() => this.saveLink()}\r\n              >\r\n                Add Link\r\n              </Button>\r\n            </div>\r\n          )}\r\n          \r\n          {this.loading ? (\r\n            <LoadingIndicator />\r\n          ) : (\r\n            <table className=\"CanBusTable\">\r\n              <thead>\r\n                <tr>\r\n                  <th>{app.translator.trans('ltydi-canbus-settings.admin.links.link_url')}</th>\r\n                  <th className=\"actions\">{app.translator.trans('ltydi-canbus-settings.admin.common.actions')}</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.links && this.links.map(link => {\r\n                  if (!link || !link.attributes) {\r\n                    console.error('Invalid link data:', link);\r\n                    return null;\r\n                  }\r\n                  \r\n                  return (\r\n                    <tr key={link.id}>\r\n                      <td>\r\n                        {[\r\n                          <div className=\"link-url\">\r\n                            <a href={link.attributes.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                              {link.attributes.url}\r\n                            </a>\r\n                          </div>,\r\n                          link.attributes.description && (\r\n                            <div className=\"LinkDescription\" style={{ marginTop: '5px', fontSize: '0.9em', color: '#666' }}>\r\n                              {link.attributes.description}\r\n                            </div>\r\n                          )\r\n                        ]}\r\n                      </td>\r\n                      <td className=\"actions\">\r\n                        {Button.component({\r\n                          className: 'Button Button--icon',\r\n                          icon: 'fas fa-edit',\r\n                          onclick: () => this.editLink(link),\r\n                          title: app.translator.trans('ltydi-canbus-settings.admin.common.edit_title')\r\n                        })}\r\n                        \r\n                        {Button.component({\r\n                          className: 'Button Button--icon',\r\n                          icon: 'fas fa-trash',\r\n                          onclick: () => this.deleteLink(link),\r\n                          title: app.translator.trans('ltydi-canbus-settings.admin.common.delete_title')\r\n                        })}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n                \r\n                {(!this.links || this.links.length === 0) && (\r\n                  <tr>\r\n                    <td colSpan=\"2\" className=\"text-center\">\r\n                      {app.translator.trans('ltydi-canbus-settings.admin.links.no_links')}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error in LinkList view:\", error);\r\n      return (\r\n        <div className=\"LinkList\">\r\n          <h3>Link List</h3>\r\n          <div className=\"CanBusError\">\r\n            <p>An error occurred while displaying links. Please try again or contact support.</p>\r\n            <p className=\"ErrorDetails\">{error.message}</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  saveLink() {\r\n    if (!this.newLink || !this.newLink.trim()) return;\r\n    \r\n    if (this.links.length > 0) {\r\n      alert('Each configuration can only have one link.');\r\n      return;\r\n    }\r\n    \r\n    this.loading = true;\r\n    console.log('Adding new link for config ID:', this.configId);\r\n    \r\n    const data = {\r\n      data: {\r\n        type: 'canbus-links',\r\n        attributes: {\r\n          url: this.newLink.trim(),\r\n          description: this.newLinkDescription ? this.newLinkDescription.trim() : ''\r\n        },\r\n        relationships: {\r\n          config: {\r\n            data: {\r\n              type: 'canbus-configs',\r\n              id: this.configId\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    \r\n    console.log('Request data:', data);\r\n    \r\n    app.request({\r\n      method: 'POST',\r\n      url: `${app.forum.attribute('apiUrl')}/canbus/links`,\r\n      body: data\r\n    }).then(response => {\r\n      console.log('Link added successfully:', response);\r\n      this.links.push(response.data);\r\n      this.newLink = '';\r\n      this.newLinkDescription = '';\r\n      this.loading = false;\r\n      \r\n      // 通知父组件保持当前视图\r\n      if (this.attrs.onUpdate) {\r\n        this.attrs.onUpdate({\r\n          action: 'add',\r\n          configId: this.configId\r\n        });\r\n      }\r\n      \r\n      m.redraw();\r\n    }).catch(error => {\r\n      console.error('Error adding link:', error);\r\n      console.error('Request data:', data);\r\n      console.error('Response:', error.response);\r\n      this.loading = false;\r\n      m.redraw();\r\n      alert('Error adding link: ' + (error.response?.errors?.[0]?.detail || error));\r\n    });\r\n  }\r\n  \r\n  editLink(link) {\r\n    if (!link || !link.attributes) {\r\n      console.error('Link object or attributes are undefined');\r\n      return;\r\n    }\r\n    \r\n    app.modal.show(EditLinkModal, {\r\n      link: link,\r\n      onsubmit: (url, description) => {\r\n        if (!url || url === link.attributes.url && description === link.attributes.description) return;\r\n        \r\n        this.loading = true;\r\n        \r\n        const data = {\r\n          data: {\r\n            type: 'canbus-links',\r\n            id: link.id,\r\n            attributes: {\r\n              url: url.trim(),\r\n              description: description ? description.trim() : ''\r\n            }\r\n          }\r\n        };\r\n        \r\n        app.request({\r\n          method: 'PATCH',\r\n          url: `${app.forum.attribute('apiUrl')}/canbus/links/${link.id}`,\r\n          body: data\r\n        }).then(response => {\r\n          const index = this.links.findIndex(l => l.id === link.id);\r\n          if (index !== -1) {\r\n            this.links[index] = response.data;\r\n          }\r\n          this.loading = false;\r\n          \r\n          // 保持当前状态并通知父组件\r\n          if (this.attrs.onUpdate) {\r\n            this.attrs.onUpdate({\r\n              action: 'edit',\r\n              configId: this.configId\r\n            });\r\n          }\r\n          \r\n          m.redraw();\r\n        }).catch(error => {\r\n          this.loading = false;\r\n          m.redraw();\r\n          alert('Error updating link: ' + (error.response?.errors?.[0]?.detail || error));\r\n        });\r\n      }\r\n    });\r\n  }\r\n  \r\n  deleteLink(link) {\r\n    app.modal.show(DeleteConfirmModal, {\r\n      onconfirm: () => {\r\n        this.loading = true;\r\n        \r\n        app.request({\r\n          method: 'DELETE',\r\n          url: `${app.forum.attribute('apiUrl')}/canbus/links/${link.id}`\r\n        }).then(() => {\r\n          this.links = this.links.filter(l => l.id !== link.id);\r\n          this.loading = false;\r\n          \r\n          // 通知父组件保持当前视图\r\n          if (this.attrs.onUpdate) {\r\n            this.attrs.onUpdate({\r\n              action: 'delete',\r\n              configId: this.configId\r\n            });\r\n          }\r\n          \r\n          m.redraw();\r\n        }).catch(error => {\r\n          this.loading = false;\r\n          m.redraw();\r\n          alert('Error deleting link: ' + (error.response?.errors?.[0]?.detail || error));\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// 创建编辑链接的模态框\r\nclass EditLinkModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.link = this.attrs.link;\r\n    this.url = this.link.attributes.url || '';\r\n    this.description = this.link.attributes.description || '';\r\n  }\r\n  \r\n  className() {\r\n    return 'EditLinkModal Modal--small';\r\n  }\r\n  \r\n  title() {\r\n    return 'Edit Link';\r\n  }\r\n  \r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <div className=\"Form-group\">\r\n            <label>Link URL</label>\r\n            <input \r\n              className=\"FormControl\" \r\n              type=\"text\" \r\n              value={this.url} \r\n              oninput={e => this.url = e.target.value} \r\n            />\r\n          </div>\r\n          \r\n          <div className=\"Form-group\">\r\n            <label>Link Description (Optional)</label>\r\n            <textarea \r\n              className=\"FormControl\" \r\n              value={this.description} \r\n              oninput={e => this.description = e.target.value}\r\n              rows=\"3\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"Form-group\">\r\n            <Button\r\n              className=\"Button Button--primary\"\r\n              type=\"submit\"\r\n              onclick={() => {\r\n                this.attrs.onsubmit(this.url, this.description);\r\n                this.hide();\r\n              }}\r\n            >\r\n              Save Changes\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// 创建删除确认的模态框\r\nclass DeleteConfirmModal extends Modal {\r\n  className() {\r\n    return 'DeleteConfirmModal Modal--small';\r\n  }\r\n  \r\n  title() {\r\n    return 'Confirm Deletion';\r\n  }\r\n  \r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <p>Are you sure you want to delete this link?</p>\r\n        \r\n        <div className=\"Form-group\">\r\n          <Button\r\n            className=\"Button Button--primary Button--danger\"\r\n            onclick={() => {\r\n              this.attrs.onconfirm();\r\n              this.hide();\r\n            }}\r\n          >\r\n            Delete\r\n          </Button>\r\n          {' '}\r\n          <Button\r\n            className=\"Button\"\r\n            onclick={() => this.hide()}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport BrandList from './BrandList';\nimport ModelList from './ModelList';\nimport YearList from './YearList';\nimport ConfigList from './ConfigList';\nimport LinkList from './LinkList';\nimport EditBrandModal from './EditBrandModal';\nimport DeleteBrandModal from './DeleteBrandModal';\n\nexport default class CanBusSettingsPage extends ExtensionPage {\n  refreshSettings() {\n    return app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/settings',\n      body: {\n        data: [{\n          type: 'settings',\n          id: 'ltydi-canbus-settings.promptText'\n        }]\n      }\n    })\n    .then(response => {\n      if (response && response.data) {\n        response.data.forEach(setting => {\n          if (setting.id === 'ltydi-canbus-settings.promptText') {\n            if (!app.data.settings) {\n              app.data.settings = {};\n            }\n            app.data.settings['ltydi-canbus-settings.promptText'] = setting.attributes.value;\n            \n            if (app.forum && app.forum.data && app.forum.data.attributes) {\n              app.forum.data.attributes['canbus.promptText'] = setting.attributes.value;\n            }\n          }\n        });\n      }\n      return response;\n    })\n    .catch(error => {\n      try {\n        const localValue = localStorage.getItem('canbus-settings-promptText');\n        if (localValue) {\n          if (!app.data.settings) app.data.settings = {};\n          app.data.settings['ltydi-canbus-settings.promptText'] = localValue;\n        }\n      } catch (e) {}\n      return { data: [] };\n    });\n  }\n  \n  oninit(vnode) {\n    super.oninit(vnode);\n    \n    this.loading = true;\n    this.section = 'brands';\n    this.hierarchy = [];\n    this.promptText = '';\n    \n    try {\n      const localStorageValue = localStorage.getItem('canbus-settings-promptText');\n      if (localStorageValue) {\n        this.promptText = localStorageValue;\n      }\n    } catch (e) {}\n    \n    this.refreshSettings().then(() => {\n      if (app.forum && app.forum.attribute('canbus.promptText')) {\n        this.promptText = app.forum.attribute('canbus.promptText');\n      }\n      else if (app.data && app.data.settings && app.data.settings['ltydi-canbus-settings.promptText']) {\n        this.promptText = app.data.settings['ltydi-canbus-settings.promptText'];\n      }\n    });\n    \n    this.loadBrands();\n  }\n\n  loadBrands() {\n    this.loading = true;\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/canbus/brands'\n    }).then(result => {\n      this.brands = result.data || [];\n      this.loading = false;\n      m.redraw();\n    }).catch(error => {\n      this.brands = [];\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"ExtensionPage-settings CanBusSettingsPage\" style={{ \n        maxWidth: 'none',\n        margin: '0',\n        width: '100%'\n      }}>\n        <div className=\"container\" style={{ \n          maxWidth: 'none',\n          padding: '0 20px',\n          width: '100%',\n          boxSizing: 'border-box'\n        }}>\n          <div className=\"Form-group\" style={{ width: '100%' }}>\n            <label>CanBus Message</label>\n            <div className=\"helpText\">\n              Customize the CanBus message that appears at the top of the settings page.\n            </div>\n            <input \n              id=\"canbus-promptText-input\"\n              className=\"FormControl\" \n              type=\"text\" \n              value={this.promptText}\n              oninput={(e) => this.promptText = e.target.value}\n              placeholder=\"Welcome to the CanBus configuration page. Please select your vehicle details to find the appropriate settings.\"\n              style={{ \n                width: '100%',\n                maxWidth: 'none',\n                boxSizing: 'border-box'\n              }}\n            />\n            <p className=\"helpText\" style={{ marginTop: '5px' }}>\n              <i className=\"fas fa-info-circle\" style={{ marginRight: '5px' }}></i>\n              This CanBus message helps guide users through the configuration process.\n            </p>\n            <div className=\"Form-group Form--controls\">\n              {Button.component({\n                type: 'submit',\n                className: 'Button Button--primary',\n                loading: this.loading,\n                onclick: this.saveSettings.bind(this)\n              }, 'Save Changes')}\n            </div>\n          </div>\n\n          <div className=\"FormSectionGroup\" style={{ width: '100%' }}>\n            <div className=\"FormSection\">\n              <label>Vehicle Database</label>\n              <p className=\"helpText\">Organize and manage vehicle information and configurations</p>\n              \n              <div className=\"CanBusInstructions\" style={{ width: '100%' }}>\n                <div className=\"CanBusInstructions-header\">\n                  <i className=\"fas fa-info-circle\"></i> Database Management Guide\n                </div>\n                <div className=\"CanBusInstructions-content\">\n                  <p>Follow these steps to manage vehicle configurations:</p>\n                  <ol>\n                    <li><strong>Brands:</strong> Add vehicle manufacturers</li>\n                    <li><strong>Models:</strong> Add vehicle models using the <i className=\"fas fa-arrow-right\"></i> icon</li>\n                    <li><strong>Years:</strong> Specify model years using the <i className=\"fas fa-arrow-right\"></i> icon</li>\n                    <li><strong>Configurations:</strong> Add specific configurations using the <i className=\"fas fa-arrow-right\"></i> icon</li>\n                    <li><strong>Settings:</strong> Add configuration details using the <i className=\"fas fa-arrow-right\"></i> icon</li>\n                    <li><strong>Resources:</strong> Add related documentation and resources</li>\n                  </ol>\n                  <p>This hierarchical structure helps users easily locate their vehicle's specific configuration.</p>\n                </div>\n              </div>\n              \n              {this.buildHierarchy()}\n              \n              {this.loading ? (\n                <LoadingIndicator />\n              ) : (\n                this.buildSection()\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  saveSettings() {\n    if (this.loading) return;\n    \n    this.loading = true;\n    const promptText = this.promptText;\n    \n    if (promptText === undefined) {\n      app.alerts.show({ type: 'error' }, '无法获取设置值');\n      this.loading = false;\n      return;\n    }\n    \n    const simpleData = {\n      'ltydi-canbus-settings.promptText': promptText\n    };\n    \n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/settings',\n      body: simpleData\n    })\n    .then((response) => {\n      this.loading = false;\n      \n      if (!app.data.settings) app.data.settings = {};\n      app.data.settings['ltydi-canbus-settings.promptText'] = promptText;\n      \n      if (app.forum && app.forum.data && app.forum.data.attributes) {\n        app.forum.data.attributes['canbus.promptText'] = promptText;\n        if ('ltydi-canbus-settings.promptText' in app.forum.data.attributes) {\n          app.forum.data.attributes['ltydi-canbus-settings.promptText'] = promptText;\n        }\n      }\n      \n      this.promptText = promptText;\n      \n      try {\n        localStorage.setItem('canbus-settings-promptText', promptText);\n      } catch (e) {}\n      \n      app.alerts.show({ type: 'success' }, 'Settings saved successfully');\n      m.redraw();\n    })\n    .catch(error => {\n      const requestBody = {\n        data: [{\n          type: 'settings',\n          id: 'ltydi-canbus-settings.promptText',\n          attributes: {\n            value: promptText\n          }\n        }]\n      };\n      \n      app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/settings',\n        body: requestBody\n      })\n      .then((response) => {\n        this.loading = false;\n        \n        if (!app.data.settings) app.data.settings = {};\n        app.data.settings['ltydi-canbus-settings.promptText'] = promptText;\n        \n        if (app.forum && app.forum.data && app.forum.data.attributes) {\n          app.forum.data.attributes['canbus.promptText'] = promptText;\n          if ('ltydi-canbus-settings.promptText' in app.forum.data.attributes) {\n            app.forum.data.attributes['ltydi-canbus-settings.promptText'] = promptText;\n          }\n        }\n        \n        try {\n          localStorage.setItem('canbus-settings-promptText', promptText);\n        } catch (e) {}\n        \n        app.alerts.show({ type: 'success' }, 'Settings saved successfully');\n        m.redraw();\n      })\n      .catch(secondError => {\n        this.loading = false;\n        \n        let errorMessage = 'Unknown error';\n        \n        if (secondError) {\n          if (secondError.message) {\n            errorMessage = secondError.message;\n          }\n          \n          if (secondError.response) {\n            try {\n              if (secondError.response.data) {\n                if (secondError.response.data.errors && secondError.response.data.errors.length > 0) {\n                  const responseError = secondError.response.data.errors[0];\n                  errorMessage = responseError.detail || responseError.title || errorMessage;\n                }\n              }\n            } catch (e) {}\n          }\n        }\n        \n        try {\n          if (!app.data.settings) app.data.settings = {};\n          app.data.settings['ltydi-canbus-settings.promptText'] = promptText;\n          \n          if (app.forum && app.forum.data && app.forum.data.attributes) {\n            app.forum.data.attributes['canbus.promptText'] = promptText;\n            if ('ltydi-canbus-settings.promptText' in app.forum.data.attributes) {\n              app.forum.data.attributes['ltydi-canbus-settings.promptText'] = promptText;\n            }\n          }\n          \n          this.promptText = promptText;\n          \n          try {\n            localStorage.setItem('canbus-settings-promptText', promptText);\n          } catch (e) {}\n        } catch (cacheError) {}\n        \n        app.alerts.show({ type: 'error' }, 'Failed to save settings: ' + errorMessage);\n      });\n    });\n  }\n  \n  buildHierarchy() {\n    if (this.hierarchy.length === 0) {\n      return null;\n    }\n    \n    return (\n      <div className=\"CanBusHierarchy\">\n        <div className=\"hierarchy-item\" onclick={() => this.navigateTo('brands')}>\n          <i className=\"fas fa-home\"></i> {app.translator.trans('ltydi-canbus-settings.admin.brands.brand_list')}\n        </div>\n        \n        {this.hierarchy.map((item, index) => (\n          <div className=\"hierarchy-item\" onclick={() => this.navigateTo(item.type, item, index)}>\n            {this.getIconForType(item.type)} {item.name}\n          </div>\n        ))}\n      </div>\n    );\n  }\n  \n  getIconForType(type) {\n    switch (type) {\n      case 'models':\n        return <i className=\"fas fa-car\"></i>;\n      case 'years':\n        return <i className=\"fas fa-calendar-alt\"></i>;\n      case 'configs':\n        return <i className=\"fas fa-cogs\"></i>;\n      case 'links':\n        return <i className=\"fas fa-link\"></i>;\n      default:\n        return <i className=\"fas fa-folder\"></i>;\n    }\n  }\n  \n  navigateTo(section, item = null, index = null) {\n    this.section = section;\n    \n    if (index !== null) {\n      this.hierarchy = this.hierarchy.slice(0, index + 1);\n    } else if (section === 'brands') {\n      this.hierarchy = [];\n    }\n    \n    m.redraw();\n  }\n  \n  buildSection() {\n    switch (this.section) {\n      case 'brands':\n        return this.buildBrandList();\n      case 'models':\n        return <ModelList brandId={this.hierarchy[0].id} onSelect={this.selectModel.bind(this)} />;\n      case 'years':\n        return <YearList modelId={this.hierarchy[1].id} onSelect={this.selectYear.bind(this)} />;\n      case 'configs':\n        return <ConfigList yearId={this.hierarchy[2].id} onSelect={this.selectConfig.bind(this)} />;\n      case 'links':\n        return <LinkList configId={this.hierarchy[3].id} onUpdate={this.handleLinkUpdate.bind(this)} />;\n      default:\n        return <div>Unknown section</div>;\n    }\n  }\n  \n  buildBrandList() {\n    return (\n      <div className=\"BrandList\">\n        <h3>{app.translator.trans('ltydi-canbus-settings.admin.brands.title')}</h3>\n        <p className=\"helpText\">{app.translator.trans('ltydi-canbus-settings.admin.brands.help_text')}</p>\n        \n        <div className=\"CanBusForm\">\n          <div className=\"form-group\">\n            <label>{app.translator.trans('ltydi-canbus-settings.admin.brands.add_new')}</label>\n            <input \n              type=\"text\" \n              className=\"FormControl\" \n              value={this.newBrand || ''} \n              oninput={e => this.newBrand = e.target.value} \n              placeholder={app.translator.trans('ltydi-canbus-settings.admin.brands.placeholder')} \n            />\n          </div>\n          \n          {Button.component({\n            className: 'Button Button--primary',\n            disabled: this.loading || !this.newBrand || this.newBrand.trim() === '',\n            onclick: () => this.saveBrand(),\n            icon: 'fas fa-plus'\n          }, app.translator.trans('ltydi-canbus-settings.admin.brands.add_button'))}\n        </div>\n        \n        <div className=\"CanBusTableContainer\">\n          <table className=\"CanBusTable\">\n            <thead>\n              <tr>\n                <th>{app.translator.trans('ltydi-canbus-settings.admin.brands.brand_name', {}, 'Brand Name')}</th>\n                <th className=\"actions\">{app.translator.trans('ltydi-canbus-settings.admin.common.actions', {}, 'Actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.brands && this.brands.map(brand => (\n                <tr key={brand.id}>\n                  <td>{brand.attributes.name}</td>\n                  <td className=\"actions\">\n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-edit',\n                      onclick: () => this.editBrand(brand),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.edit_title')\n                    })}\n                    \n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-trash',\n                      onclick: () => this.deleteBrand(brand),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.common.delete_title')\n                    })}\n                    \n                    {Button.component({\n                      className: 'Button Button--icon',\n                      icon: 'fas fa-arrow-right',\n                      onclick: () => this.selectBrand(brand),\n                      title: app.translator.trans('ltydi-canbus-settings.admin.brands.view_models_title')\n                    })}\n                  </td>\n                </tr>\n              ))}\n              \n              {(!this.brands || this.brands.length === 0) && (\n                <tr>\n                  <td colSpan=\"2\" className=\"text-center\">\n                    {app.translator.trans('ltydi-canbus-settings.admin.brands.no_brands')}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n  \n  selectBrand(brand) {\n    this.hierarchy = [\n      { type: 'models', id: brand.id, name: brand.attributes.name }\n    ];\n    this.section = 'models';\n    m.redraw();\n  }\n  \n  selectModel(model) {\n    this.hierarchy.push(\n      { type: 'years', id: model.id, name: model.attributes.name }\n    );\n    this.section = 'years';\n    m.redraw();\n  }\n  \n  selectYear(year) {\n    this.hierarchy.push(\n      { type: 'configs', id: year.id, name: year.attributes.year_range }\n    );\n    this.section = 'configs';\n    m.redraw();\n  }\n  \n  selectConfig(config) {\n    if (!config || !config.id) {\n      alert(\"Unable to select configuration: Invalid configuration data\");\n      return;\n    }\n    \n    try {\n      this.hierarchy.push(\n        { type: 'links', id: config.id, name: config.attributes.name }\n      );\n      this.section = 'links';\n      m.redraw();\n    } catch (error) {\n      alert(\"Error selecting configuration: \" + error.message);\n    }\n  }\n  \n  saveBrand() {\n    if (!this.newBrand || !this.newBrand.trim()) {\n      alert('Brand name cannot be empty');\n      return;\n    }\n    \n    const brandName = this.newBrand.trim();\n    this.loading = true;\n    \n    const url = app.forum.attribute('apiUrl') + '/canbus/brands?name=' + encodeURIComponent(brandName);\n    \n    app.request({\n      method: 'POST',\n      url: url\n    }).then(result => {\n      this.brands.push(result.data);\n      this.newBrand = '';\n      this.loading = false;\n      m.redraw();\n    }).catch(error => {\n      app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/canbus/brands'\n      }).then(result => {\n        this.brands.push(result.data);\n        this.newBrand = '';\n        this.loading = false;\n        m.redraw();\n      }).catch(secondError => {\n        this.loading = false;\n        m.redraw();\n        alert('Error adding brand: ' + (error.response && error.response.errors ? error.response.errors[0].detail : error));\n      });\n    });\n  }\n  \n  editBrand(brand) {\n    app.modal.show(EditBrandModal, {\n      brand: brand,\n      onsubmit: (newName) => {\n        if (!newName || newName === brand.attributes.name) return;\n        \n        this.loading = true;\n        \n        const requestData = {\n          data: {\n            type: 'canbus-brands',\n            id: brand.id,\n            attributes: {\n              name: newName.trim()\n            }\n          }\n        };\n        \n        app.request({\n          method: 'PATCH',\n          url: app.forum.attribute('apiUrl') + '/canbus/brands/' + brand.id,\n          body: requestData\n        }).then(result => {\n          const index = this.brands.findIndex(b => b.id === brand.id);\n          if (index !== -1) {\n            this.brands[index] = result.data;\n          }\n          this.loading = false;\n          m.redraw();\n          this.loadBrands();\n          app.alerts.show({type: 'success'}, `Brand updated successfully to: ${newName.trim()}`);\n        }).catch(error => {\n          this.loading = false;\n          m.redraw();\n          alert('Error updating brand: ' + (error.response && error.response.errors ? error.response.errors[0].detail : error));\n        });\n      }\n    });\n  }\n  \n  deleteBrand(brand) {\n    app.modal.show(DeleteBrandModal, {\n      brand: brand,\n      onconfirm: () => {\n        this.loading = true;\n        \n        app.request({\n          method: 'DELETE',\n          url: app.forum.attribute('apiUrl') + '/canbus/brands/' + brand.id\n        }).then(() => {\n          this.brands = this.brands.filter(b => b.id !== brand.id);\n          this.loading = false;\n          m.redraw();\n        }).catch(error => {\n          this.loading = false;\n          m.redraw();\n          alert('Error deleting brand: ' + (error.response && error.response.errors ? error.response.errors[0].detail : error));\n        });\n      }\n    });\n  }\n  \n  handleLinkUpdate(data) {\n    if (data && data.action && data.configId) {\n      this.section = 'links';\n      m.redraw();\n    }\n  }\n}","import app from 'flarum/admin/app';\r\nimport CanBusSettingsPage from './src/admin/components/CanBusSettingsPage';\r\n\r\napp.initializers.add('ltydi/canbus-settings', () => {\r\n  app.extensionData\r\n    .for('ltydi-canbus-settings')\r\n    .registerPage(CanBusSettingsPage);\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","EditBrandModal","_Modal","apply","arguments","_proto","oninit","vnode","this","brand","attrs","newName","attributes","name","className","title","content","_this","m","type","value","oninput","target","Button","onclick","onsubmit","hide","Modal","DeleteBrandModal","onconfirm","ModelList","_Component","brandId","models","loading","newModel","loadModels","app","method","url","attribute","params","filter","brand_id","then","result","data","redraw","error","alert","view","_this2","placeholder","disabled","saveModel","LoadingIndicator","trans","map","model","id","icon","editModel","deleteModel","onSelect","length","colSpan","_this3","trim","modelName","encodeURIComponent","console","log","push","secondError","response","errors","detail","_this4","show","EditModelModal","requestData","body","index","findIndex","_error$response","_this5","DeleteModelModal","_error$response2","Component","_proto2","_this6","_Modal2","_proto3","_this7","jQuery","YearList","modelId","years","newYearRange","editingYearId","editYearRange","loadYears","onupdate","forceRefresh","_nocache","Date","getTime","headers","saveYear","year","year_range","editYear","deleteYear","relationships","DeleteYearModal","y","EditYearModal","ConfigList","yearId","configs","newConfigName","loadConfigs","saveConfig","config","editConfig","deleteConfig","EditConfigModal","c","DeleteConfigModal","_error$response3","LinkList","configId","links","newLink","newLinkDescription","setTimeout","loadLinks","Array","isArray","warn","hasExistingLink","style","marginTop","rows","saveLink","link","href","rel","description","fontSize","color","editLink","deleteLink","message","onUpdate","action","EditLinkModal","l","DeleteConfirmModal","_this8","CanBusSettingsPage","_ExtensionPage","refreshSettings","forEach","setting","settings","localValue","localStorage","getItem","section","hierarchy","promptText","localStorageValue","loadBrands","brands","maxWidth","margin","width","padding","boxSizing","marginRight","saveSettings","buildHierarchy","buildSection","undefined","simpleData","setItem","requestBody","errorMessage","responseError","cacheError","navigateTo","item","getIconForType","slice","buildBrandList","selectModel","selectYear","selectConfig","handleLinkUpdate","newBrand","saveBrand","editBrand","deleteBrand","selectBrand","brandName","b","_this9","ExtensionPage","add","registerPage"],"sourceRoot":""}